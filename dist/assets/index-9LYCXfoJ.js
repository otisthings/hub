import{r as c,a as ls}from"./vendor-DbAb9B2p.js";import{u as ds,L as ne,O as cs,a as tr,N as Ar,b as At,c as Le,B as xs,R as gs,d as oe}from"./router-CH4US7i4.js";import{X as Rt,M as ms,a as kt,U as He,C as Jt,L as hs,H as us,T as rt,F as be,S as ps,B as ze,b as gt,c as Rr,d as Et,e as Ve,A as rr,f as Ue,g as sr,h as me,P as he,i as $e,j as Oe,k as st,l as Je,m as We,n as Er,R as ys,o as wt,p as Dr,q as Nt,r as ar,s as Wt,t as bs,u as vt,v as pt,w as we,I as fs,x as at,y as _t,E as js,z as ks,D as Tr,G as ws,J as Ns,K as vs,N as _s,O as yt,Q as Ss,V as Cs}from"./ui-C_iz-e4R.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();var Fr={exports:{}},Dt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var As=c,Rs=Symbol.for("react.element"),Es=Symbol.for("react.fragment"),Ds=Object.prototype.hasOwnProperty,Ts=As.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fs={key:!0,ref:!0,__self:!0,__source:!0};function Pr(t,r,s){var a,n={},o=null,l=null;s!==void 0&&(o=""+s),r.key!==void 0&&(o=""+r.key),r.ref!==void 0&&(l=r.ref);for(a in r)Ds.call(r,a)&&!Fs.hasOwnProperty(a)&&(n[a]=r[a]);if(t&&t.defaultProps)for(a in r=t.defaultProps,r)n[a]===void 0&&(n[a]=r[a]);return{$$typeof:Rs,type:t,key:o,ref:l,props:n,_owner:Ts.current}}Dt.Fragment=Es;Dt.jsx=Pr;Dt.jsxs=Pr;Fr.exports=Dt;var e=Fr.exports,Or,gr=ls;Or=gr.createRoot,gr.hydrateRoot;function Lr(t,r){return function(){return t.apply(r,arguments)}}const{toString:Ps}=Object.prototype,{getPrototypeOf:nr}=Object,{iterator:Tt,toStringTag:Ur}=Symbol,Ft=(t=>r=>{const s=Ps.call(r);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Ae=t=>(t=t.toLowerCase(),r=>Ft(r)===t),Pt=t=>r=>typeof r===t,{isArray:nt}=Array,mt=Pt("undefined");function Os(t){return t!==null&&!mt(t)&&t.constructor!==null&&!mt(t.constructor)&&ue(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const $r=Ae("ArrayBuffer");function Ls(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&$r(t.buffer),r}const Us=Pt("string"),ue=Pt("function"),Ir=Pt("number"),Ot=t=>t!==null&&typeof t=="object",$s=t=>t===!0||t===!1,bt=t=>{if(Ft(t)!=="object")return!1;const r=nr(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Ur in t)&&!(Tt in t)},Is=Ae("Date"),Ms=Ae("File"),Bs=Ae("Blob"),zs=Ae("FileList"),qs=t=>Ot(t)&&ue(t.pipe),Hs=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||ue(t.append)&&((r=Ft(t))==="formdata"||r==="object"&&ue(t.toString)&&t.toString()==="[object FormData]"))},Vs=Ae("URLSearchParams"),[Js,Ws,Qs,Gs]=["ReadableStream","Request","Response","Headers"].map(Ae),Ks=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ht(t,r,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let a,n;if(typeof t!="object"&&(t=[t]),nt(t))for(a=0,n=t.length;a<n;a++)r.call(null,t[a],a,t);else{const o=s?Object.getOwnPropertyNames(t):Object.keys(t),l=o.length;let x;for(a=0;a<l;a++)x=o[a],r.call(null,t[x],x,t)}}function Mr(t,r){r=r.toLowerCase();const s=Object.keys(t);let a=s.length,n;for(;a-- >0;)if(n=s[a],r===n.toLowerCase())return n;return null}const Be=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Br=t=>!mt(t)&&t!==Be;function Qt(){const{caseless:t}=Br(this)&&this||{},r={},s=(a,n)=>{const o=t&&Mr(r,n)||n;bt(r[o])&&bt(a)?r[o]=Qt(r[o],a):bt(a)?r[o]=Qt({},a):nt(a)?r[o]=a.slice():r[o]=a};for(let a=0,n=arguments.length;a<n;a++)arguments[a]&&ht(arguments[a],s);return r}const Ys=(t,r,s,{allOwnKeys:a}={})=>(ht(r,(n,o)=>{s&&ue(n)?t[o]=Lr(n,s):t[o]=n},{allOwnKeys:a}),t),Xs=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Zs=(t,r,s,a)=>{t.prototype=Object.create(r.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),s&&Object.assign(t.prototype,s)},ea=(t,r,s,a)=>{let n,o,l;const x={};if(r=r||{},t==null)return r;do{for(n=Object.getOwnPropertyNames(t),o=n.length;o-- >0;)l=n[o],(!a||a(l,t,r))&&!x[l]&&(r[l]=t[l],x[l]=!0);t=s!==!1&&nr(t)}while(t&&(!s||s(t,r))&&t!==Object.prototype);return r},ta=(t,r,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=r.length;const a=t.indexOf(r,s);return a!==-1&&a===s},ra=t=>{if(!t)return null;if(nt(t))return t;let r=t.length;if(!Ir(r))return null;const s=new Array(r);for(;r-- >0;)s[r]=t[r];return s},sa=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&nr(Uint8Array)),aa=(t,r)=>{const a=(t&&t[Tt]).call(t);let n;for(;(n=a.next())&&!n.done;){const o=n.value;r.call(t,o[0],o[1])}},na=(t,r)=>{let s;const a=[];for(;(s=t.exec(r))!==null;)a.push(s);return a},ia=Ae("HTMLFormElement"),oa=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,a,n){return a.toUpperCase()+n}),mr=(({hasOwnProperty:t})=>(r,s)=>t.call(r,s))(Object.prototype),la=Ae("RegExp"),zr=(t,r)=>{const s=Object.getOwnPropertyDescriptors(t),a={};ht(s,(n,o)=>{let l;(l=r(n,o,t))!==!1&&(a[o]=l||n)}),Object.defineProperties(t,a)},da=t=>{zr(t,(r,s)=>{if(ue(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const a=t[s];if(ue(a)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},ca=(t,r)=>{const s={},a=n=>{n.forEach(o=>{s[o]=!0})};return nt(t)?a(t):a(String(t).split(r)),s},xa=()=>{},ga=(t,r)=>t!=null&&Number.isFinite(t=+t)?t:r;function ma(t){return!!(t&&ue(t.append)&&t[Ur]==="FormData"&&t[Tt])}const ha=t=>{const r=new Array(10),s=(a,n)=>{if(Ot(a)){if(r.indexOf(a)>=0)return;if(!("toJSON"in a)){r[n]=a;const o=nt(a)?[]:{};return ht(a,(l,x)=>{const b=s(l,n+1);!mt(b)&&(o[x]=b)}),r[n]=void 0,o}}return a};return s(t,0)},ua=Ae("AsyncFunction"),pa=t=>t&&(Ot(t)||ue(t))&&ue(t.then)&&ue(t.catch),qr=((t,r)=>t?setImmediate:r?((s,a)=>(Be.addEventListener("message",({source:n,data:o})=>{n===Be&&o===s&&a.length&&a.shift()()},!1),n=>{a.push(n),Be.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",ue(Be.postMessage)),ya=typeof queueMicrotask<"u"?queueMicrotask.bind(Be):typeof process<"u"&&process.nextTick||qr,ba=t=>t!=null&&ue(t[Tt]),u={isArray:nt,isArrayBuffer:$r,isBuffer:Os,isFormData:Hs,isArrayBufferView:Ls,isString:Us,isNumber:Ir,isBoolean:$s,isObject:Ot,isPlainObject:bt,isReadableStream:Js,isRequest:Ws,isResponse:Qs,isHeaders:Gs,isUndefined:mt,isDate:Is,isFile:Ms,isBlob:Bs,isRegExp:la,isFunction:ue,isStream:qs,isURLSearchParams:Vs,isTypedArray:sa,isFileList:zs,forEach:ht,merge:Qt,extend:Ys,trim:Ks,stripBOM:Xs,inherits:Zs,toFlatObject:ea,kindOf:Ft,kindOfTest:Ae,endsWith:ta,toArray:ra,forEachEntry:aa,matchAll:na,isHTMLForm:ia,hasOwnProperty:mr,hasOwnProp:mr,reduceDescriptors:zr,freezeMethods:da,toObjectSet:ca,toCamelCase:oa,noop:xa,toFiniteNumber:ga,findKey:Mr,global:Be,isContextDefined:Br,isSpecCompliantForm:ma,toJSONObject:ha,isAsyncFn:ua,isThenable:pa,setImmediate:qr,asap:ya,isIterable:ba};function B(t,r,s,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),s&&(this.config=s),a&&(this.request=a),n&&(this.response=n,this.status=n.status?n.status:null)}u.inherits(B,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:u.toJSONObject(this.config),code:this.code,status:this.status}}});const Hr=B.prototype,Vr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Vr[t]={value:t}});Object.defineProperties(B,Vr);Object.defineProperty(Hr,"isAxiosError",{value:!0});B.from=(t,r,s,a,n,o)=>{const l=Object.create(Hr);return u.toFlatObject(t,l,function(b){return b!==Error.prototype},x=>x!=="isAxiosError"),B.call(l,t.message,r,s,a,n),l.cause=t,l.name=t.name,o&&Object.assign(l,o),l};const fa=null;function Gt(t){return u.isPlainObject(t)||u.isArray(t)}function Jr(t){return u.endsWith(t,"[]")?t.slice(0,-2):t}function hr(t,r,s){return t?t.concat(r).map(function(n,o){return n=Jr(n),!s&&o?"["+n+"]":n}).join(s?".":""):r}function ja(t){return u.isArray(t)&&!t.some(Gt)}const ka=u.toFlatObject(u,{},null,function(r){return/^is[A-Z]/.test(r)});function Lt(t,r,s){if(!u.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,s=u.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,j){return!u.isUndefined(j[A])});const a=s.metaTokens,n=s.visitor||m,o=s.dots,l=s.indexes,b=(s.Blob||typeof Blob<"u"&&Blob)&&u.isSpecCompliantForm(r);if(!u.isFunction(n))throw new TypeError("visitor must be a function");function g(w){if(w===null)return"";if(u.isDate(w))return w.toISOString();if(!b&&u.isBlob(w))throw new B("Blob is not supported. Use a Buffer instead.");return u.isArrayBuffer(w)||u.isTypedArray(w)?b&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function m(w,A,j){let k=w;if(w&&!j&&typeof w=="object"){if(u.endsWith(A,"{}"))A=a?A:A.slice(0,-2),w=JSON.stringify(w);else if(u.isArray(w)&&ja(w)||(u.isFileList(w)||u.endsWith(A,"[]"))&&(k=u.toArray(w)))return A=Jr(A),k.forEach(function(h,N){!(u.isUndefined(h)||h===null)&&r.append(l===!0?hr([A],N,o):l===null?A:A+"[]",g(h))}),!1}return Gt(w)?!0:(r.append(hr(j,A,o),g(w)),!1)}const f=[],_=Object.assign(ka,{defaultVisitor:m,convertValue:g,isVisitable:Gt});function E(w,A){if(!u.isUndefined(w)){if(f.indexOf(w)!==-1)throw Error("Circular reference detected in "+A.join("."));f.push(w),u.forEach(w,function(k,d){(!(u.isUndefined(k)||k===null)&&n.call(r,k,u.isString(d)?d.trim():d,A,_))===!0&&E(k,A?A.concat(d):[d])}),f.pop()}}if(!u.isObject(t))throw new TypeError("data must be an object");return E(t),r}function ur(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return r[a]})}function ir(t,r){this._pairs=[],t&&Lt(t,this,r)}const Wr=ir.prototype;Wr.append=function(r,s){this._pairs.push([r,s])};Wr.toString=function(r){const s=r?function(a){return r.call(this,a,ur)}:ur;return this._pairs.map(function(n){return s(n[0])+"="+s(n[1])},"").join("&")};function wa(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Qr(t,r,s){if(!r)return t;const a=s&&s.encode||wa;u.isFunction(s)&&(s={serialize:s});const n=s&&s.serialize;let o;if(n?o=n(r,s):o=u.isURLSearchParams(r)?r.toString():new ir(r,s).toString(a),o){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class pr{constructor(){this.handlers=[]}use(r,s,a){return this.handlers.push({fulfilled:r,rejected:s,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){u.forEach(this.handlers,function(a){a!==null&&r(a)})}}const Gr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Na=typeof URLSearchParams<"u"?URLSearchParams:ir,va=typeof FormData<"u"?FormData:null,_a=typeof Blob<"u"?Blob:null,Sa={isBrowser:!0,classes:{URLSearchParams:Na,FormData:va,Blob:_a},protocols:["http","https","file","blob","url","data"]},or=typeof window<"u"&&typeof document<"u",Kt=typeof navigator=="object"&&navigator||void 0,Ca=or&&(!Kt||["ReactNative","NativeScript","NS"].indexOf(Kt.product)<0),Aa=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ra=or&&window.location.href||"http://localhost",Ea=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:or,hasStandardBrowserEnv:Ca,hasStandardBrowserWebWorkerEnv:Aa,navigator:Kt,origin:Ra},Symbol.toStringTag,{value:"Module"})),de={...Ea,...Sa};function Da(t,r){return Lt(t,new de.classes.URLSearchParams,Object.assign({visitor:function(s,a,n,o){return de.isNode&&u.isBuffer(s)?(this.append(a,s.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},r))}function Ta(t){return u.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function Fa(t){const r={},s=Object.keys(t);let a;const n=s.length;let o;for(a=0;a<n;a++)o=s[a],r[o]=t[o];return r}function Kr(t){function r(s,a,n,o){let l=s[o++];if(l==="__proto__")return!0;const x=Number.isFinite(+l),b=o>=s.length;return l=!l&&u.isArray(n)?n.length:l,b?(u.hasOwnProp(n,l)?n[l]=[n[l],a]:n[l]=a,!x):((!n[l]||!u.isObject(n[l]))&&(n[l]=[]),r(s,a,n[l],o)&&u.isArray(n[l])&&(n[l]=Fa(n[l])),!x)}if(u.isFormData(t)&&u.isFunction(t.entries)){const s={};return u.forEachEntry(t,(a,n)=>{r(Ta(a),n,s,0)}),s}return null}function Pa(t,r,s){if(u.isString(t))try{return(r||JSON.parse)(t),u.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(0,JSON.stringify)(t)}const ut={transitional:Gr,adapter:["xhr","http","fetch"],transformRequest:[function(r,s){const a=s.getContentType()||"",n=a.indexOf("application/json")>-1,o=u.isObject(r);if(o&&u.isHTMLForm(r)&&(r=new FormData(r)),u.isFormData(r))return n?JSON.stringify(Kr(r)):r;if(u.isArrayBuffer(r)||u.isBuffer(r)||u.isStream(r)||u.isFile(r)||u.isBlob(r)||u.isReadableStream(r))return r;if(u.isArrayBufferView(r))return r.buffer;if(u.isURLSearchParams(r))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let x;if(o){if(a.indexOf("application/x-www-form-urlencoded")>-1)return Da(r,this.formSerializer).toString();if((x=u.isFileList(r))||a.indexOf("multipart/form-data")>-1){const b=this.env&&this.env.FormData;return Lt(x?{"files[]":r}:r,b&&new b,this.formSerializer)}}return o||n?(s.setContentType("application/json",!1),Pa(r)):r}],transformResponse:[function(r){const s=this.transitional||ut.transitional,a=s&&s.forcedJSONParsing,n=this.responseType==="json";if(u.isResponse(r)||u.isReadableStream(r))return r;if(r&&u.isString(r)&&(a&&!this.responseType||n)){const l=!(s&&s.silentJSONParsing)&&n;try{return JSON.parse(r)}catch(x){if(l)throw x.name==="SyntaxError"?B.from(x,B.ERR_BAD_RESPONSE,this,null,this.response):x}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:de.classes.FormData,Blob:de.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};u.forEach(["delete","get","head","post","put","patch"],t=>{ut.headers[t]={}});const Oa=u.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),La=t=>{const r={};let s,a,n;return t&&t.split(`
`).forEach(function(l){n=l.indexOf(":"),s=l.substring(0,n).trim().toLowerCase(),a=l.substring(n+1).trim(),!(!s||r[s]&&Oa[s])&&(s==="set-cookie"?r[s]?r[s].push(a):r[s]=[a]:r[s]=r[s]?r[s]+", "+a:a)}),r},yr=Symbol("internals");function xt(t){return t&&String(t).trim().toLowerCase()}function ft(t){return t===!1||t==null?t:u.isArray(t)?t.map(ft):String(t)}function Ua(t){const r=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=s.exec(t);)r[a[1]]=a[2];return r}const $a=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Bt(t,r,s,a,n){if(u.isFunction(a))return a.call(this,r,s);if(n&&(r=s),!!u.isString(r)){if(u.isString(a))return r.indexOf(a)!==-1;if(u.isRegExp(a))return a.test(r)}}function Ia(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,s,a)=>s.toUpperCase()+a)}function Ma(t,r){const s=u.toCamelCase(" "+r);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+s,{value:function(n,o,l){return this[a].call(this,r,n,o,l)},configurable:!0})})}class pe{constructor(r){r&&this.set(r)}set(r,s,a){const n=this;function o(x,b,g){const m=xt(b);if(!m)throw new Error("header name must be a non-empty string");const f=u.findKey(n,m);(!f||n[f]===void 0||g===!0||g===void 0&&n[f]!==!1)&&(n[f||b]=ft(x))}const l=(x,b)=>u.forEach(x,(g,m)=>o(g,m,b));if(u.isPlainObject(r)||r instanceof this.constructor)l(r,s);else if(u.isString(r)&&(r=r.trim())&&!$a(r))l(La(r),s);else if(u.isObject(r)&&u.isIterable(r)){let x={},b,g;for(const m of r){if(!u.isArray(m))throw TypeError("Object iterator must return a key-value pair");x[g=m[0]]=(b=x[g])?u.isArray(b)?[...b,m[1]]:[b,m[1]]:m[1]}l(x,s)}else r!=null&&o(s,r,a);return this}get(r,s){if(r=xt(r),r){const a=u.findKey(this,r);if(a){const n=this[a];if(!s)return n;if(s===!0)return Ua(n);if(u.isFunction(s))return s.call(this,n,a);if(u.isRegExp(s))return s.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,s){if(r=xt(r),r){const a=u.findKey(this,r);return!!(a&&this[a]!==void 0&&(!s||Bt(this,this[a],a,s)))}return!1}delete(r,s){const a=this;let n=!1;function o(l){if(l=xt(l),l){const x=u.findKey(a,l);x&&(!s||Bt(a,a[x],x,s))&&(delete a[x],n=!0)}}return u.isArray(r)?r.forEach(o):o(r),n}clear(r){const s=Object.keys(this);let a=s.length,n=!1;for(;a--;){const o=s[a];(!r||Bt(this,this[o],o,r,!0))&&(delete this[o],n=!0)}return n}normalize(r){const s=this,a={};return u.forEach(this,(n,o)=>{const l=u.findKey(a,o);if(l){s[l]=ft(n),delete s[o];return}const x=r?Ia(o):String(o).trim();x!==o&&delete s[o],s[x]=ft(n),a[x]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const s=Object.create(null);return u.forEach(this,(a,n)=>{a!=null&&a!==!1&&(s[n]=r&&u.isArray(a)?a.join(", "):a)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,s])=>r+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...s){const a=new this(r);return s.forEach(n=>a.set(n)),a}static accessor(r){const a=(this[yr]=this[yr]={accessors:{}}).accessors,n=this.prototype;function o(l){const x=xt(l);a[x]||(Ma(n,l),a[x]=!0)}return u.isArray(r)?r.forEach(o):o(r),this}}pe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);u.reduceDescriptors(pe.prototype,({value:t},r)=>{let s=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(a){this[s]=a}}});u.freezeMethods(pe);function zt(t,r){const s=this||ut,a=r||s,n=pe.from(a.headers);let o=a.data;return u.forEach(t,function(x){o=x.call(s,o,n.normalize(),r?r.status:void 0)}),n.normalize(),o}function Yr(t){return!!(t&&t.__CANCEL__)}function it(t,r,s){B.call(this,t??"canceled",B.ERR_CANCELED,r,s),this.name="CanceledError"}u.inherits(it,B,{__CANCEL__:!0});function Xr(t,r,s){const a=s.config.validateStatus;!s.status||!a||a(s.status)?t(s):r(new B("Request failed with status code "+s.status,[B.ERR_BAD_REQUEST,B.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function Ba(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function za(t,r){t=t||10;const s=new Array(t),a=new Array(t);let n=0,o=0,l;return r=r!==void 0?r:1e3,function(b){const g=Date.now(),m=a[o];l||(l=g),s[n]=b,a[n]=g;let f=o,_=0;for(;f!==n;)_+=s[f++],f=f%t;if(n=(n+1)%t,n===o&&(o=(o+1)%t),g-l<r)return;const E=m&&g-m;return E?Math.round(_*1e3/E):void 0}}function qa(t,r){let s=0,a=1e3/r,n,o;const l=(g,m=Date.now())=>{s=m,n=null,o&&(clearTimeout(o),o=null),t.apply(null,g)};return[(...g)=>{const m=Date.now(),f=m-s;f>=a?l(g,m):(n=g,o||(o=setTimeout(()=>{o=null,l(n)},a-f)))},()=>n&&l(n)]}const St=(t,r,s=3)=>{let a=0;const n=za(50,250);return qa(o=>{const l=o.loaded,x=o.lengthComputable?o.total:void 0,b=l-a,g=n(b),m=l<=x;a=l;const f={loaded:l,total:x,progress:x?l/x:void 0,bytes:b,rate:g||void 0,estimated:g&&x&&m?(x-l)/g:void 0,event:o,lengthComputable:x!=null,[r?"download":"upload"]:!0};t(f)},s)},br=(t,r)=>{const s=t!=null;return[a=>r[0]({lengthComputable:s,total:t,loaded:a}),r[1]]},fr=t=>(...r)=>u.asap(()=>t(...r)),Ha=de.hasStandardBrowserEnv?((t,r)=>s=>(s=new URL(s,de.origin),t.protocol===s.protocol&&t.host===s.host&&(r||t.port===s.port)))(new URL(de.origin),de.navigator&&/(msie|trident)/i.test(de.navigator.userAgent)):()=>!0,Va=de.hasStandardBrowserEnv?{write(t,r,s,a,n,o){const l=[t+"="+encodeURIComponent(r)];u.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),u.isString(a)&&l.push("path="+a),u.isString(n)&&l.push("domain="+n),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read(t){const r=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Ja(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Wa(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function Zr(t,r,s){let a=!Ja(r);return t&&(a||s==!1)?Wa(t,r):r}const jr=t=>t instanceof pe?{...t}:t;function Qe(t,r){r=r||{};const s={};function a(g,m,f,_){return u.isPlainObject(g)&&u.isPlainObject(m)?u.merge.call({caseless:_},g,m):u.isPlainObject(m)?u.merge({},m):u.isArray(m)?m.slice():m}function n(g,m,f,_){if(u.isUndefined(m)){if(!u.isUndefined(g))return a(void 0,g,f,_)}else return a(g,m,f,_)}function o(g,m){if(!u.isUndefined(m))return a(void 0,m)}function l(g,m){if(u.isUndefined(m)){if(!u.isUndefined(g))return a(void 0,g)}else return a(void 0,m)}function x(g,m,f){if(f in r)return a(g,m);if(f in t)return a(void 0,g)}const b={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:x,headers:(g,m,f)=>n(jr(g),jr(m),f,!0)};return u.forEach(Object.keys(Object.assign({},t,r)),function(m){const f=b[m]||n,_=f(t[m],r[m],m);u.isUndefined(_)&&f!==x||(s[m]=_)}),s}const es=t=>{const r=Qe({},t);let{data:s,withXSRFToken:a,xsrfHeaderName:n,xsrfCookieName:o,headers:l,auth:x}=r;r.headers=l=pe.from(l),r.url=Qr(Zr(r.baseURL,r.url,r.allowAbsoluteUrls),t.params,t.paramsSerializer),x&&l.set("Authorization","Basic "+btoa((x.username||"")+":"+(x.password?unescape(encodeURIComponent(x.password)):"")));let b;if(u.isFormData(s)){if(de.hasStandardBrowserEnv||de.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((b=l.getContentType())!==!1){const[g,...m]=b?b.split(";").map(f=>f.trim()).filter(Boolean):[];l.setContentType([g||"multipart/form-data",...m].join("; "))}}if(de.hasStandardBrowserEnv&&(a&&u.isFunction(a)&&(a=a(r)),a||a!==!1&&Ha(r.url))){const g=n&&o&&Va.read(o);g&&l.set(n,g)}return r},Qa=typeof XMLHttpRequest<"u",Ga=Qa&&function(t){return new Promise(function(s,a){const n=es(t);let o=n.data;const l=pe.from(n.headers).normalize();let{responseType:x,onUploadProgress:b,onDownloadProgress:g}=n,m,f,_,E,w;function A(){E&&E(),w&&w(),n.cancelToken&&n.cancelToken.unsubscribe(m),n.signal&&n.signal.removeEventListener("abort",m)}let j=new XMLHttpRequest;j.open(n.method.toUpperCase(),n.url,!0),j.timeout=n.timeout;function k(){if(!j)return;const h=pe.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),S={data:!x||x==="text"||x==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:h,config:t,request:j};Xr(function(T){s(T),A()},function(T){a(T),A()},S),j=null}"onloadend"in j?j.onloadend=k:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(k)},j.onabort=function(){j&&(a(new B("Request aborted",B.ECONNABORTED,t,j)),j=null)},j.onerror=function(){a(new B("Network Error",B.ERR_NETWORK,t,j)),j=null},j.ontimeout=function(){let N=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const S=n.transitional||Gr;n.timeoutErrorMessage&&(N=n.timeoutErrorMessage),a(new B(N,S.clarifyTimeoutError?B.ETIMEDOUT:B.ECONNABORTED,t,j)),j=null},o===void 0&&l.setContentType(null),"setRequestHeader"in j&&u.forEach(l.toJSON(),function(N,S){j.setRequestHeader(S,N)}),u.isUndefined(n.withCredentials)||(j.withCredentials=!!n.withCredentials),x&&x!=="json"&&(j.responseType=n.responseType),g&&([_,w]=St(g,!0),j.addEventListener("progress",_)),b&&j.upload&&([f,E]=St(b),j.upload.addEventListener("progress",f),j.upload.addEventListener("loadend",E)),(n.cancelToken||n.signal)&&(m=h=>{j&&(a(!h||h.type?new it(null,t,j):h),j.abort(),j=null)},n.cancelToken&&n.cancelToken.subscribe(m),n.signal&&(n.signal.aborted?m():n.signal.addEventListener("abort",m)));const d=Ba(n.url);if(d&&de.protocols.indexOf(d)===-1){a(new B("Unsupported protocol "+d+":",B.ERR_BAD_REQUEST,t));return}j.send(o||null)})},Ka=(t,r)=>{const{length:s}=t=t?t.filter(Boolean):[];if(r||s){let a=new AbortController,n;const o=function(g){if(!n){n=!0,x();const m=g instanceof Error?g:this.reason;a.abort(m instanceof B?m:new it(m instanceof Error?m.message:m))}};let l=r&&setTimeout(()=>{l=null,o(new B(`timeout ${r} of ms exceeded`,B.ETIMEDOUT))},r);const x=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(g=>{g.unsubscribe?g.unsubscribe(o):g.removeEventListener("abort",o)}),t=null)};t.forEach(g=>g.addEventListener("abort",o));const{signal:b}=a;return b.unsubscribe=()=>u.asap(x),b}},Ya=function*(t,r){let s=t.byteLength;if(s<r){yield t;return}let a=0,n;for(;a<s;)n=a+r,yield t.slice(a,n),a=n},Xa=async function*(t,r){for await(const s of Za(t))yield*Ya(s,r)},Za=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const r=t.getReader();try{for(;;){const{done:s,value:a}=await r.read();if(s)break;yield a}}finally{await r.cancel()}},kr=(t,r,s,a)=>{const n=Xa(t,r);let o=0,l,x=b=>{l||(l=!0,a&&a(b))};return new ReadableStream({async pull(b){try{const{done:g,value:m}=await n.next();if(g){x(),b.close();return}let f=m.byteLength;if(s){let _=o+=f;s(_)}b.enqueue(new Uint8Array(m))}catch(g){throw x(g),g}},cancel(b){return x(b),n.return()}},{highWaterMark:2})},Ut=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",ts=Ut&&typeof ReadableStream=="function",en=Ut&&(typeof TextEncoder=="function"?(t=>r=>t.encode(r))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),rs=(t,...r)=>{try{return!!t(...r)}catch{return!1}},tn=ts&&rs(()=>{let t=!1;const r=new Request(de.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!r}),wr=64*1024,Yt=ts&&rs(()=>u.isReadableStream(new Response("").body)),Ct={stream:Yt&&(t=>t.body)};Ut&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!Ct[r]&&(Ct[r]=u.isFunction(t[r])?s=>s[r]():(s,a)=>{throw new B(`Response type '${r}' is not supported`,B.ERR_NOT_SUPPORT,a)})})})(new Response);const rn=async t=>{if(t==null)return 0;if(u.isBlob(t))return t.size;if(u.isSpecCompliantForm(t))return(await new Request(de.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(u.isArrayBufferView(t)||u.isArrayBuffer(t))return t.byteLength;if(u.isURLSearchParams(t)&&(t=t+""),u.isString(t))return(await en(t)).byteLength},sn=async(t,r)=>{const s=u.toFiniteNumber(t.getContentLength());return s??rn(r)},an=Ut&&(async t=>{let{url:r,method:s,data:a,signal:n,cancelToken:o,timeout:l,onDownloadProgress:x,onUploadProgress:b,responseType:g,headers:m,withCredentials:f="same-origin",fetchOptions:_}=es(t);g=g?(g+"").toLowerCase():"text";let E=Ka([n,o&&o.toAbortSignal()],l),w;const A=E&&E.unsubscribe&&(()=>{E.unsubscribe()});let j;try{if(b&&tn&&s!=="get"&&s!=="head"&&(j=await sn(m,a))!==0){let S=new Request(r,{method:"POST",body:a,duplex:"half"}),P;if(u.isFormData(a)&&(P=S.headers.get("content-type"))&&m.setContentType(P),S.body){const[T,H]=br(j,St(fr(b)));a=kr(S.body,wr,T,H)}}u.isString(f)||(f=f?"include":"omit");const k="credentials"in Request.prototype;w=new Request(r,{..._,signal:E,method:s.toUpperCase(),headers:m.normalize().toJSON(),body:a,duplex:"half",credentials:k?f:void 0});let d=await fetch(w);const h=Yt&&(g==="stream"||g==="response");if(Yt&&(x||h&&A)){const S={};["status","statusText","headers"].forEach(R=>{S[R]=d[R]});const P=u.toFiniteNumber(d.headers.get("content-length")),[T,H]=x&&br(P,St(fr(x),!0))||[];d=new Response(kr(d.body,wr,T,()=>{H&&H(),A&&A()}),S)}g=g||"text";let N=await Ct[u.findKey(Ct,g)||"text"](d,t);return!h&&A&&A(),await new Promise((S,P)=>{Xr(S,P,{data:N,headers:pe.from(d.headers),status:d.status,statusText:d.statusText,config:t,request:w})})}catch(k){throw A&&A(),k&&k.name==="TypeError"&&/Load failed|fetch/i.test(k.message)?Object.assign(new B("Network Error",B.ERR_NETWORK,t,w),{cause:k.cause||k}):B.from(k,k&&k.code,t,w)}}),Xt={http:fa,xhr:Ga,fetch:an};u.forEach(Xt,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const Nr=t=>`- ${t}`,nn=t=>u.isFunction(t)||t===null||t===!1,ss={getAdapter:t=>{t=u.isArray(t)?t:[t];const{length:r}=t;let s,a;const n={};for(let o=0;o<r;o++){s=t[o];let l;if(a=s,!nn(s)&&(a=Xt[(l=String(s)).toLowerCase()],a===void 0))throw new B(`Unknown adapter '${l}'`);if(a)break;n[l||"#"+o]=a}if(!a){const o=Object.entries(n).map(([x,b])=>`adapter ${x} `+(b===!1?"is not supported by the environment":"is not available in the build"));let l=r?o.length>1?`since :
`+o.map(Nr).join(`
`):" "+Nr(o[0]):"as no adapter specified";throw new B("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return a},adapters:Xt};function qt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new it(null,t)}function vr(t){return qt(t),t.headers=pe.from(t.headers),t.data=zt.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ss.getAdapter(t.adapter||ut.adapter)(t).then(function(a){return qt(t),a.data=zt.call(t,t.transformResponse,a),a.headers=pe.from(a.headers),a},function(a){return Yr(a)||(qt(t),a&&a.response&&(a.response.data=zt.call(t,t.transformResponse,a.response),a.response.headers=pe.from(a.response.headers))),Promise.reject(a)})}const as="1.9.0",$t={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{$t[t]=function(a){return typeof a===t||"a"+(r<1?"n ":" ")+t}});const _r={};$t.transitional=function(r,s,a){function n(o,l){return"[Axios v"+as+"] Transitional option '"+o+"'"+l+(a?". "+a:"")}return(o,l,x)=>{if(r===!1)throw new B(n(l," has been removed"+(s?" in "+s:"")),B.ERR_DEPRECATED);return s&&!_r[l]&&(_r[l]=!0,console.warn(n(l," has been deprecated since v"+s+" and will be removed in the near future"))),r?r(o,l,x):!0}};$t.spelling=function(r){return(s,a)=>(console.warn(`${a} is likely a misspelling of ${r}`),!0)};function on(t,r,s){if(typeof t!="object")throw new B("options must be an object",B.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let n=a.length;for(;n-- >0;){const o=a[n],l=r[o];if(l){const x=t[o],b=x===void 0||l(x,o,t);if(b!==!0)throw new B("option "+o+" must be "+b,B.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new B("Unknown option "+o,B.ERR_BAD_OPTION)}}const jt={assertOptions:on,validators:$t},Te=jt.validators;class qe{constructor(r){this.defaults=r||{},this.interceptors={request:new pr,response:new pr}}async request(r,s){try{return await this._request(r,s)}catch(a){if(a instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const o=n.stack?n.stack.replace(/^.+\n/,""):"";try{a.stack?o&&!String(a.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+o):a.stack=o}catch{}}throw a}}_request(r,s){typeof r=="string"?(s=s||{},s.url=r):s=r||{},s=Qe(this.defaults,s);const{transitional:a,paramsSerializer:n,headers:o}=s;a!==void 0&&jt.assertOptions(a,{silentJSONParsing:Te.transitional(Te.boolean),forcedJSONParsing:Te.transitional(Te.boolean),clarifyTimeoutError:Te.transitional(Te.boolean)},!1),n!=null&&(u.isFunction(n)?s.paramsSerializer={serialize:n}:jt.assertOptions(n,{encode:Te.function,serialize:Te.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),jt.assertOptions(s,{baseUrl:Te.spelling("baseURL"),withXsrfToken:Te.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let l=o&&u.merge(o.common,o[s.method]);o&&u.forEach(["delete","get","head","post","put","patch","common"],w=>{delete o[w]}),s.headers=pe.concat(l,o);const x=[];let b=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(s)===!1||(b=b&&A.synchronous,x.unshift(A.fulfilled,A.rejected))});const g=[];this.interceptors.response.forEach(function(A){g.push(A.fulfilled,A.rejected)});let m,f=0,_;if(!b){const w=[vr.bind(this),void 0];for(w.unshift.apply(w,x),w.push.apply(w,g),_=w.length,m=Promise.resolve(s);f<_;)m=m.then(w[f++],w[f++]);return m}_=x.length;let E=s;for(f=0;f<_;){const w=x[f++],A=x[f++];try{E=w(E)}catch(j){A.call(this,j);break}}try{m=vr.call(this,E)}catch(w){return Promise.reject(w)}for(f=0,_=g.length;f<_;)m=m.then(g[f++],g[f++]);return m}getUri(r){r=Qe(this.defaults,r);const s=Zr(r.baseURL,r.url,r.allowAbsoluteUrls);return Qr(s,r.params,r.paramsSerializer)}}u.forEach(["delete","get","head","options"],function(r){qe.prototype[r]=function(s,a){return this.request(Qe(a||{},{method:r,url:s,data:(a||{}).data}))}});u.forEach(["post","put","patch"],function(r){function s(a){return function(o,l,x){return this.request(Qe(x||{},{method:r,headers:a?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}qe.prototype[r]=s(),qe.prototype[r+"Form"]=s(!0)});class lr{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(o){s=o});const a=this;this.promise.then(n=>{if(!a._listeners)return;let o=a._listeners.length;for(;o-- >0;)a._listeners[o](n);a._listeners=null}),this.promise.then=n=>{let o;const l=new Promise(x=>{a.subscribe(x),o=x}).then(n);return l.cancel=function(){a.unsubscribe(o)},l},r(function(o,l,x){a.reason||(a.reason=new it(o,l,x),s(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const s=this._listeners.indexOf(r);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const r=new AbortController,s=a=>{r.abort(a)};return this.subscribe(s),r.signal.unsubscribe=()=>this.unsubscribe(s),r.signal}static source(){let r;return{token:new lr(function(n){r=n}),cancel:r}}}function ln(t){return function(s){return t.apply(null,s)}}function dn(t){return u.isObject(t)&&t.isAxiosError===!0}const Zt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Zt).forEach(([t,r])=>{Zt[r]=t});function ns(t){const r=new qe(t),s=Lr(qe.prototype.request,r);return u.extend(s,qe.prototype,r,{allOwnKeys:!0}),u.extend(s,r,null,{allOwnKeys:!0}),s.create=function(n){return ns(Qe(t,n))},s}const ae=ns(ut);ae.Axios=qe;ae.CanceledError=it;ae.CancelToken=lr;ae.isCancel=Yr;ae.VERSION=as;ae.toFormData=Lt;ae.AxiosError=B;ae.Cancel=ae.CanceledError;ae.all=function(r){return Promise.all(r)};ae.spread=ln;ae.isAxiosError=dn;ae.mergeConfig=Qe;ae.AxiosHeaders=pe;ae.formToJSON=t=>Kr(u.isHTMLForm(t)?new FormData(t):t);ae.getAdapter=ss.getAdapter;ae.HttpStatusCode=Zt;ae.default=ae;const cn=()=>"https://demohub.otisdev.org",dr=cn();console.log("?? API Base URL:",dr);console.log("?? Environment:","production");console.log("?? Current Origin:",window.location.origin);const U=ae.create({baseURL:dr,withCredentials:!0,timeout:3e4,headers:{"Content-Type":"application/json"}});U.interceptors.request.use(t=>{var r;return console.log("?? API Request:",{method:(r=t.method)==null?void 0:r.toUpperCase(),url:t.url,baseURL:t.baseURL,withCredentials:t.withCredentials,origin:window.location.origin,cookies:document.cookie?"Present":"Missing",cookieDetails:document.cookie}),t},t=>(console.error("? Request Error:",t),Promise.reject(t)));U.interceptors.response.use(t=>(console.log("? API Response:",{status:t.status,url:t.config.url,headers:t.headers,cookies:document.cookie,setCookieHeader:t.headers["set-cookie"]}),t),t=>{var r,s,a,n,o,l,x;return console.error("? Response Error:",{status:(r=t.response)==null?void 0:r.status,url:(s=t.config)==null?void 0:s.url,message:t.message,headers:(a=t.response)==null?void 0:a.headers,cookies:document.cookie,data:(n=t.response)==null?void 0:n.data,config:{withCredentials:(o=t.config)==null?void 0:o.withCredentials,baseURL:(l=t.config)==null?void 0:l.baseURL}}),((x=t.response)==null?void 0:x.status)===401&&(console.warn("?? Authentication failed - 401 Unauthorized"),console.warn("?? Current cookies:",document.cookie)),Promise.reject(t)});const er={getCurrentUser:()=>U.get("/auth/user").then(t=>t.data),logout:()=>U.post("/auth/logout").then(t=>t.data),getDiscordAuthUrl:()=>`${dr}/auth/discord`},xe={getAll:t=>U.get("/api/tickets",{params:t}).then(r=>r.data),getById:t=>U.get(`/api/tickets/${t}`).then(r=>r.data),create:t=>U.post("/api/tickets",t).then(r=>r.data),addMessage:(t,r)=>U.post(`/api/tickets/${t}/messages`,{message:r}).then(s=>s.data),updateStatus:(t,r)=>U.put(`/api/tickets/${t}/status`,{status:r}).then(s=>s.data),assign:(t,r)=>U.put(`/api/tickets/${t}/assign`,{assigned_to:r}).then(s=>s.data),transfer:(t,r)=>U.put(`/api/tickets/${t}/transfer`,{category_id:r}).then(s=>s.data),claim:(t,r)=>U.put(`/api/tickets/${t}/claim`,{claim:r}).then(s=>s.data),addParticipant:(t,r)=>U.post(`/api/tickets/${t}/participants`,{discord_id:r}).then(s=>s.data)},Ce={getAll:()=>U.get("/api/categories").then(t=>t.data),getAccessibleCategories:()=>U.get("/api/categories/accessible").then(t=>t.data),getSupportCategories:()=>U.get("/api/categories/support").then(t=>t.data),create:t=>U.post("/api/categories",t).then(r=>r.data),update:(t,r)=>U.put(`/api/categories/${t}`,r).then(s=>s.data),delete:t=>U.delete(`/api/categories/${t}`).then(r=>r.data)},Se={getAll:()=>U.get("/api/applications").then(t=>t.data),getPublic:()=>U.get("/api/applications/public").then(t=>t.data),getOne:t=>U.get(`/api/applications/${t}`).then(r=>r.data),create:t=>U.post("/api/applications",t).then(r=>r.data),update:(t,r)=>U.put(`/api/applications/${t}`,r).then(s=>s.data),submit:(t,r)=>U.post(`/api/applications/${t}/submit`,{responses:r}).then(s=>s.data),getSubmissions:t=>U.get(`/api/applications/${t}/submissions`).then(r=>r.data),getMySubmissions:t=>U.get(`/api/applications/${t}/my-submissions`).then(r=>r.data),reviewSubmission:(t,r,s)=>U.put(`/api/applications/${t}/submissions/${r}`,s).then(a=>a.data),getMyApplications:()=>U.get("/api/my-applications").then(t=>t.data)},tt={getSelfAssignable:()=>U.get("/api/roles/self-assignable").then(t=>t.data),toggleRole:(t,r)=>U.post(`/api/roles/self-assignable/${t}/toggle`,{action:r}).then(s=>s.data),getAdminSelfAssignable:()=>U.get("/api/admin/roles/self-assignable").then(t=>t.data),createSelfAssignable:t=>U.post("/api/admin/roles/self-assignable",t).then(r=>r.data),updateSelfAssignable:(t,r)=>U.put(`/api/admin/roles/self-assignable/${t}`,r).then(s=>s.data),deleteSelfAssignable:t=>U.delete(`/api/admin/roles/self-assignable/${t}`).then(r=>r.data)},ge={getAll:()=>U.get("/api/departments").then(t=>t.data),getByClassification:t=>U.get(`/api/departments/classification/${t}`).then(r=>r.data),getRoster:t=>U.get(`/api/departments/${t}/roster`).then(r=>r.data),addToRoster:(t,r,s)=>U.post(`/api/departments/${t}/roster`,{discord_id:r,callsign_number:s}).then(a=>a.data),updateRosterMember:(t,r,s)=>U.put(`/api/departments/${t}/roster/${r}`,{callsign_number:s}).then(a=>a.data),removeFromRoster:(t,r)=>U.delete(`/api/departments/${t}/roster/${r}`).then(s=>s.data),getAllAdmin:()=>U.get("/api/departments/admin/all").then(t=>t.data),create:t=>U.post("/api/departments",t).then(r=>r.data),update:(t,r)=>U.put(`/api/departments/${t}`,r).then(s=>s.data),delete:t=>U.delete(`/api/departments/${t}`).then(r=>r.data)},xn={getProfile:t=>U.get(`/api/profile/${t}`).then(r=>r.data)},gn={getTimeclockData:()=>U.get("/api/timeclock").then(t=>t.data)},is={getStats:()=>U.get("/api/dashboard/stats").then(t=>t.data)},os=c.createContext(void 0),fe=()=>{const t=c.useContext(os);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},mn=({children:t})=>{const[r,s]=c.useState(null),[a,n]=c.useState(!0),o=async()=>{var g,m,f,_;try{console.log("?? AuthContext: Fetching user..."),console.log("?? Current cookies:",document.cookie);const E=await er.getCurrentUser();console.log("? AuthContext: User fetched successfully:",{id:E.id,username:E.username}),s(E)}catch(E){if(console.error("? AuthContext: Failed to fetch user:",E),console.log("?? Cookies during error:",document.cookie),((g=E.response)==null?void 0:g.status)===403&&((f=(m=E.response)==null?void 0:m.data)==null?void 0:f.error)==="Hub banned"){console.log("?? User is hub banned, redirecting to login with error"),s(null),window.location.href=`/login?error=hub_banned&reason=${encodeURIComponent(E.response.data.reason||"You have been banned from the hub.")}`;return}((_=E.response)==null?void 0:_.status)===401?(console.log("?? AuthContext: User not authenticated, clearing user state"),s(null)):console.warn("?? AuthContext: Network or other error, keeping current user state")}finally{n(!1)}},l=async()=>{try{console.log("?? AuthContext: Logging out..."),await er.logout(),s(null),console.log("? AuthContext: Logout successful")}catch(g){console.error("? AuthContext: Logout failed:",g),s(null)}},x=async()=>{console.log("?? AuthContext: Refreshing user..."),await o()};c.useEffect(()=>{console.log("?? AuthContext: Initializing..."),console.log("?? Initial cookies:",document.cookie),new URLSearchParams(window.location.search).get("auth")==="success"?(console.log("?? AuthContext: Auth success detected, waiting for session to establish..."),setTimeout(()=>{console.log("?? AuthContext: Attempting to fetch user after auth success..."),o()},2e3)):o()},[]);const b={user:r,loading:a,logout:l,refreshUser:x};return e.jsx(os.Provider,{value:b,children:t})};let Ht=null;async function cr(){if(Ht!==null)return Ht;try{const r=(await U.get("/health")).data.features;return Ht=r,r}catch(t){return console.error("Failed to fetch feature flags:",t),{enableDepartments:!0,enableOrganizations:!0,enablePlayerRecord:!0,enableTimeclock:!0}}}const hn=()=>{const t=ds(),{user:r,logout:s}=fe(),[a,n]=c.useState(!1),[o,l]=c.useState(!1),[x,b]=c.useState(!1),[g,m]=c.useState(!0),[f,_]=c.useState(null),[E,w]=c.useState(!1),[A,j]=c.useState(""),[k,d]=c.useState(!1),[h,N]=c.useState(!1),[S,P]=c.useState(!0),[T,H]=c.useState({enableDepartments:!0,enableOrganizations:!0,enablePlayerRecord:!0,enableTimeclock:!0}),R=c.useRef(null),D=c.useRef(null),O=c.useRef(null);c.useEffect(()=>{(async()=>{const q=await cr();H(q)})()},[]),c.useEffect(()=>{(async()=>{if(!r){m(!1);return}try{if(r.is_admin){b(!0),m(!1);return}const q=await Ce.getSupportCategories();b(q.length>0)}catch(q){console.error("Failed to check support access:",q),b(!1)}finally{m(!1)}})()},[r]),c.useEffect(()=>{(async()=>{if(!r||!T.enableDepartments){P(!1);return}try{if(r.is_admin){d(!0),N(T.enableOrganizations),P(!1);return}const[q,Z]=await Promise.all([T.enableDepartments?ge.getByClassification("department"):[],T.enableOrganizations?ge.getByClassification("organization"):[]]);d(q.length>0),N(Z.length>0)}catch(q){console.error("Failed to check department access:",q),d(!1),N(!1)}finally{P(!1)}})()},[r,T]),c.useEffect(()=>{(async()=>{try{const q=await fetch("/api/settings/branding",{credentials:"include"});if(q.ok){const Z=await q.json();_(Z.custom_logo_url),j(Z.community_name)}}catch(q){console.error("Failed to fetch branding:",q)}finally{w(!0)}})()},[]);const z=()=>r?r.is_admin?!0:(r.roles||[]).some(q=>q.id==="1388595095342678157"):!1,I=[{name:"Dashboard",href:"/",icon:us},{name:"Tickets",href:"/tickets",icon:rt}];I.push({name:"Applications",href:"/applications",icon:be}),I.push({name:"Store",href:"https://store.lynus.gg/",icon:ps,external:!0});const Q=I.length;T.enableDepartments&&k&&I.push({name:"Departments",href:"/departments",icon:ze}),T.enableOrganizations&&h&&I.push({name:"Organizations",href:"/organizations",icon:gt}),r&&(r.is_admin||!g&&x)&&I.push({name:"Support",href:"/support",icon:Rr}),r&&z()&&I.push({name:"Management",href:"/management",icon:Et}),r!=null&&r.is_admin&&I.push({name:"Admin Panel",href:"/admin",icon:Ve});const Y=$=>$==="/"?t.pathname==="/":t.pathname.startsWith($),re=($,q)=>$?`https://cdn.discordapp.com/avatars/${q}/${$}.png`:null;c.useEffect(()=>{const $=q=>{R.current&&D.current&&!R.current.contains(q.target)&&!D.current.contains(q.target)&&n(!1)};if(a)return document.addEventListener("mousedown",$),()=>{document.removeEventListener("mousedown",$)}},[a]),c.useEffect(()=>{l(!1)},[t.pathname]),c.useEffect(()=>{const $=q=>{O.current&&!O.current.contains(q.target)&&!q.target.closest("[data-mobile-menu-trigger]")&&l(!1)};if(o)return document.addEventListener("mousedown",$),()=>{document.removeEventListener("mousedown",$)}},[o]);const te=E&&f,ie=te?"h-20":"h-16",Ne=te?"py-4":"py-6";return e.jsxs(e.Fragment,{children:[e.jsx("button",{"data-mobile-menu-trigger":!0,onClick:()=>l(!o),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-gray-900 text-white rounded-lg shadow-lg",children:o?e.jsx(Rt,{className:"h-6 w-6"}):e.jsx(ms,{className:"h-6 w-6"})}),o&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40"}),e.jsxs("div",{ref:O,className:`
          fixed lg:relative inset-y-0 left-0 z-40 w-64 bg-gray-900 transform transition-transform duration-300 ease-in-out
          ${o?"translate-x-0":"-translate-x-full lg:translate-x-0"}
          flex flex-col h-full
        `,children:[e.jsx("div",{className:`flex items-center justify-center flex-shrink-0 ${ie} px-4 mt-12 lg:mt-0`,children:E&&e.jsx("div",{className:"flex flex-col items-center justify-center w-full",children:f?e.jsx("img",{src:f,alt:"Logo",className:"h-12 lg:h-16 w-full max-w-[240px] object-contain",onError:()=>_(null)}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(kt,{className:"h-6 lg:h-8 w-6 lg:w-8 text-indigo-400"}),e.jsx("span",{className:"text-lg lg:text-xl font-bold text-white",children:A})]})})}),E&&e.jsx("div",{className:"px-4",children:e.jsx("hr",{className:"border-gray-600"})}),E&&e.jsx("nav",{className:`flex-1 px-4 space-y-2 overflow-y-auto ${Ne}`,children:I.map(($,q)=>{const Z=$.icon,se=q===Q&&Q>0;return e.jsxs("div",{children:[se&&e.jsx("div",{className:"py-2",children:e.jsx("hr",{className:"border-gray-700"})}),$.external?e.jsxs("a",{href:$.href,target:"_blank",rel:"noopener noreferrer",onClick:()=>l(!1),className:"flex items-center px-3 lg:px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 text-gray-300 hover:bg-gray-800 hover:text-white",children:[e.jsx(Z,{className:"mr-3 h-5 w-5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:$.name})]}):e.jsxs(ne,{to:$.href,onClick:()=>l(!1),className:`flex items-center px-3 lg:px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 ${Y($.href)?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/25":"text-gray-300 hover:bg-gray-800 hover:text-white"}`,children:[e.jsx(Z,{className:"mr-3 h-5 w-5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:$.name})]})]},$.name)})}),r&&E&&e.jsxs("div",{className:"flex-shrink-0 relative",children:[e.jsxs("div",{ref:D,className:"flex items-center justify-between p-3 lg:p-4 cursor-pointer hover:bg-gray-800 transition-colors duration-200",onClick:()=>n(!a),children:[e.jsxs("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:[e.jsx("div",{className:"relative flex-shrink-0",children:re(r.avatar,r.discord_id)?e.jsx("img",{src:re(r.avatar,r.discord_id),alt:r.username,className:"h-8 lg:h-10 w-8 lg:w-10 rounded-full ring-2 ring-gray-600 hover:ring-indigo-500 transition-all duration-200"}):e.jsx("div",{className:"h-8 lg:h-10 w-8 lg:w-10 bg-indigo-500 rounded-full flex items-center justify-center ring-2 ring-gray-600 hover:ring-indigo-500 transition-all duration-200",children:e.jsx(He,{className:"h-4 lg:h-5 w-4 lg:w-5 text-white"})})}),e.jsx("div",{className:"min-w-0 flex-1",children:e.jsx("p",{className:"text-sm font-medium text-white truncate",children:r.username})})]}),e.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[e.jsx(Jt,{className:`h-4 w-4 text-gray-400 transition-transform duration-200 ${a?"rotate-180":""}`}),e.jsx("button",{onClick:$=>{$.stopPropagation(),s()},title:"Logout",className:"flex items-center justify-center p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-all duration-200",children:e.jsx(hs,{className:"h-4 lg:h-5 w-4 lg:w-5"})})]})]}),a&&e.jsx("div",{ref:R,className:"absolute bottom-full left-3 lg:left-4 right-3 lg:right-4 mb-2 bg-gray-800 rounded-lg shadow-xl border border-gray-700 py-2 z-50 backdrop-blur-sm",children:e.jsxs(ne,{to:"/my-profile",className:"flex items-center px-4 py-3 text-sm text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200",onClick:()=>{n(!1),l(!1)},children:[e.jsx(He,{className:"h-4 w-4 mr-3"}),"My Profile"]})})]})]})]})},un=()=>e.jsxs("div",{className:"flex h-screen bg-gray-900",children:[e.jsx(hn,{}),e.jsx("div",{className:"flex-1 flex flex-col overflow-hidden lg:ml-0",children:e.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 dark:bg-gray-800",children:e.jsx("div",{className:"container mx-auto px-4 lg:px-6 py-4 lg:py-8 pt-20 lg:pt-8",children:e.jsx(cs,{})})})})]}),pn=()=>{const{user:t,loading:r,refreshUser:s}=fe(),[a]=tr(),[n,o]=c.useState(null),[l,x]=c.useState(!1),[b,g]=c.useState("");if(c.useEffect(()=>{a.get("auth")==="success"&&s()},[a,s]),c.useEffect(()=>{(async()=>{try{const w=await fetch("/api/settings/branding");if(w.ok){const A=await w.json();o(A.custom_logo_url),g(A.community_name),document.title=A.community_name}}catch(w){console.error("Failed to fetch branding:",w)}finally{x(!0)}})()},[]),r||!l)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-400"})});if(t)return e.jsx(Ar,{to:"/",replace:!0});const m=()=>{window.location.href=er.getDiscordAuthUrl()},f=a.get("error"),_=a.get("reason");return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 px-4",children:e.jsxs("div",{className:"max-w-md w-full space-y-6 lg:space-y-8 p-6 lg:p-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-6 lg:mb-8",children:n?e.jsx("img",{src:n,alt:"Logo",className:"h-16 lg:h-24 w-auto max-w-full object-contain",onError:()=>o(null)}):e.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 p-3 lg:p-4 rounded-2xl shadow-lg",children:e.jsx(kt,{className:"h-8 lg:h-12 w-8 lg:w-12 text-white"})})}),e.jsxs("div",{className:"mb-6 lg:mb-8",children:[e.jsxs("h2",{className:"text-2xl lg:text-3xl font-bold text-white mb-3 lg:mb-4",children:["Welcome to ",b]}),e.jsx("p",{className:"text-gray-300 text-base lg:text-lg",children:"Please log in with Discord to continue."})]})]}),f==="hub_banned"&&e.jsx("div",{className:"mb-6 p-4 lg:p-6 bg-red-900/50 border border-red-700/50 rounded-xl",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(rr,{className:"h-6 w-6 text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-300 font-semibold mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-red-200 text-sm",children:_?decodeURIComponent(_):"You have been banned from the hub."}),e.jsx("p",{className:"text-red-300 text-xs mt-2",children:"If you believe this is an error, please contact an administrator."})]})]})}),f==="auth_failed"&&e.jsx("div",{className:"mb-6 p-3 lg:p-4 bg-red-900/50 border border-red-700/50 rounded-xl",children:e.jsx("p",{className:"text-red-300 text-sm text-center",children:"Authentication failed. Please try again or contact support."})}),f!=="hub_banned"&&e.jsx("div",{children:e.jsxs("button",{onClick:m,className:"group relative w-full flex justify-center py-3 lg:py-4 px-4 border border-transparent text-base lg:text-lg font-medium rounded-xl text-white bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 transform hover:scale-105 shadow-lg",children:[e.jsx("svg",{className:"w-5 lg:w-6 h-5 lg:h-6 mr-3",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.196.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"})}),"Login with Discord"]})}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-gray-400 text-sm",children:"Secure authentication powered by Discord"})})]})})},J=()=>e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"})}),yn=()=>{const{user:t}=fe(),[r,s]=c.useState([]),[a,n]=c.useState(!0);c.useEffect(()=>{(async()=>{try{const b=await xe.getAll({limit:5,status:"open"});s(b||[])}catch(b){console.error("Failed to fetch recent tickets:",b)}finally{n(!1)}})()},[]);const o=x=>{switch(x){case"open":return"text-green-600 bg-green-100 dark:text-green-400 dark:bg-green-900/20";case"closed":return"text-gray-600 bg-gray-100 dark:text-gray-400 dark:bg-gray-900/20";case"in_progress":return"text-yellow-600 bg-yellow-100 dark:text-yellow-400 dark:bg-yellow-900/20";default:return"text-blue-600 bg-blue-100 dark:text-blue-400 dark:bg-blue-900/20"}},l=x=>new Date(x).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(J,{})}):e.jsxs("div",{className:"space-y-6 lg:space-y-8",children:[e.jsxs("div",{className:"text-center py-6 lg:py-8",children:[e.jsxs("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white mb-2",children:["Welcome back, ",t==null?void 0:t.username]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm lg:text-base",children:"What would you like to do today?"})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 lg:gap-8",children:[e.jsxs("div",{className:"xl:col-span-2",children:[e.jsx("h2",{className:"text-lg lg:text-xl font-semibold text-gray-900 dark:text-white mb-4 lg:mb-6",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs(ne,{to:"/tickets/new",className:"group p-4 lg:p-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600 transition-all duration-200 hover:shadow-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3 lg:space-x-4",children:[e.jsx("div",{className:"p-2 lg:p-3 bg-blue-100 dark:bg-blue-900/20 rounded-lg group-hover:bg-blue-200 dark:group-hover:bg-blue-900/30 transition-colors flex-shrink-0",children:e.jsx(kt,{className:"h-5 lg:h-6 w-5 lg:w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm lg:text-base",children:"Create Ticket"}),e.jsx("p",{className:"text-xs lg:text-sm text-gray-600 dark:text-gray-400",children:"Get help from support"})]})]}),e.jsx(Ue,{className:"h-4 lg:h-5 w-4 lg:w-5 text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors mt-3 lg:mt-4 ml-auto"})]}),e.jsxs(ne,{to:"/applications",className:"group p-4 lg:p-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-green-300 dark:hover:border-green-600 transition-all duration-200 hover:shadow-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3 lg:space-x-4",children:[e.jsx("div",{className:"p-2 lg:p-3 bg-green-100 dark:bg-green-900/20 rounded-lg group-hover:bg-green-200 dark:group-hover:bg-green-900/30 transition-colors flex-shrink-0",children:e.jsx(be,{className:"h-5 lg:h-6 w-5 lg:w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm lg:text-base",children:"Applications"}),e.jsx("p",{className:"text-xs lg:text-sm text-gray-600 dark:text-gray-400",children:"Apply for roles"})]})]}),e.jsx(Ue,{className:"h-4 lg:h-5 w-4 lg:w-5 text-gray-400 group-hover:text-green-600 dark:group-hover:text-green-400 transition-colors mt-3 lg:mt-4 ml-auto"})]}),e.jsxs(ne,{to:"/my-profile",className:"group p-4 lg:p-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-purple-300 dark:hover:border-purple-600 transition-all duration-200 hover:shadow-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3 lg:space-x-4",children:[e.jsx("div",{className:"p-2 lg:p-3 bg-purple-100 dark:bg-purple-900/20 rounded-lg group-hover:bg-purple-200 dark:group-hover:bg-purple-900/30 transition-colors flex-shrink-0",children:e.jsx(He,{className:"h-5 lg:h-6 w-5 lg:w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm lg:text-base",children:"My Profile"}),e.jsx("p",{className:"text-xs lg:text-sm text-gray-600 dark:text-gray-400",children:"View your record"})]})]}),e.jsx(Ue,{className:"h-4 lg:h-5 w-4 lg:w-5 text-gray-400 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors mt-3 lg:mt-4 ml-auto"})]}),e.jsxs(ne,{to:"/tickets",className:"group p-4 lg:p-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-orange-300 dark:hover:border-orange-600 transition-all duration-200 hover:shadow-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3 lg:space-x-4",children:[e.jsx("div",{className:"p-2 lg:p-3 bg-orange-100 dark:bg-orange-900/20 rounded-lg group-hover:bg-orange-200 dark:group-hover:bg-orange-900/30 transition-colors flex-shrink-0",children:e.jsx(kt,{className:"h-5 lg:h-6 w-5 lg:w-6 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm lg:text-base",children:"My Tickets"}),e.jsx("p",{className:"text-xs lg:text-sm text-gray-600 dark:text-gray-400",children:"View all tickets"})]})]}),e.jsx(Ue,{className:"h-4 lg:h-5 w-4 lg:w-5 text-gray-400 group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors mt-3 lg:mt-4 ml-auto"})]})]}),(t==null?void 0:t.is_admin)&&e.jsx("div",{className:"mt-6",children:e.jsxs(ne,{to:"/admin",className:"group flex items-center justify-between p-3 lg:p-4 bg-red-50 dark:bg-red-900/20 rounded-xl border border-red-200 dark:border-red-800 hover:bg-red-100 dark:hover:bg-red-900/30 transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center space-x-3 lg:space-x-4",children:[e.jsx("div",{className:"p-2 lg:p-3 bg-red-100 dark:bg-red-900/20 rounded-lg flex-shrink-0",children:e.jsx(sr,{className:"h-5 lg:h-6 w-5 lg:w-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm lg:text-base",children:"Admin Panel"}),e.jsx("p",{className:"text-xs lg:text-sm text-gray-600 dark:text-gray-400",children:"Manage the hub"})]})]}),e.jsx(Ue,{className:"h-4 lg:h-5 w-4 lg:w-5 text-gray-400 group-hover:text-red-600 dark:group-hover:text-red-400 transition-colors flex-shrink-0"})]})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-4 lg:p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg lg:text-xl font-semibold text-gray-900 dark:text-white",children:"Recent Activity"}),e.jsx(ne,{to:"/tickets",className:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium text-sm",children:"View all"})]})}),e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.length>0?r.map(x=>e.jsx(ne,{to:`/tickets/${x.id}`,className:"block p-3 lg:p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:x.category_color}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:x.title}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-2 mt-1 space-y-1 sm:space-y-0",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${o(x.status)} w-fit`,children:x.status.replace("_"," ")}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:l(x.created_at)})]})]})]})},x.id)):e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(me,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No recent activity"})]})})]}),e.jsxs("div",{className:"mt-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-4 lg:p-6",children:[e.jsx("h3",{className:"text-base lg:text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Getting Started"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-indigo-100 dark:bg-indigo-900/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-indigo-600 dark:text-indigo-400",children:"1"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm lg:text-base",children:"Check Your Profile"}),e.jsx("p",{className:"text-xs lg:text-sm text-gray-600 dark:text-gray-400",children:"View your community record and applications"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-indigo-100 dark:bg-indigo-900/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-indigo-600 dark:text-indigo-400",children:"2"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm lg:text-base",children:"Browse Applications"}),e.jsx("p",{className:"text-xs lg:text-sm text-gray-600 dark:text-gray-400",children:"Apply for available roles and positions"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-indigo-100 dark:bg-indigo-900/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-indigo-600 dark:text-indigo-400",children:"3"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm lg:text-base",children:"Need Help?"}),e.jsx("p",{className:"text-xs lg:text-sm text-gray-600 dark:text-gray-400",children:"Create a support ticket for assistance"})]})]})]})]})]})]})]})},bn=()=>{const[t,r]=c.useState([]),[s,a]=c.useState([]),[n,o]=c.useState(null),[l,x]=c.useState(!0),[b,g]=c.useState(""),[m,f]=c.useState("open"),[_,E]=c.useState("");c.useEffect(()=>{(async()=>{try{const[h,N,S]=await Promise.all([xe.getAll(),Ce.getAll(),is.getStats()]);r(h),a(N),o({total:S.total||0,open:S.open||0,closed:S.closed||0})}catch(h){console.error("Failed to fetch tickets:",h)}finally{x(!1)}})()},[]);const w=t.filter(d=>{const h=d.title.toLowerCase().includes(b.toLowerCase())||d.user_name.toLowerCase().includes(b.toLowerCase()),N=!m||d.status===m,S=!_||d.category_name===_;return h&&N&&S}),A=d=>{switch(d){case"open":return e.jsx(me,{className:"h-4 w-4"});case"closed":return e.jsx($e,{className:"h-4 w-4"});case"cancelled":return e.jsx(st,{className:"h-4 w-4"});default:return e.jsx(rt,{className:"h-4 w-4"})}},j=d=>{switch(d){case"open":return"text-green-600 bg-green-100 dark:text-green-400 dark:bg-green-900/20";case"closed":return"text-gray-600 bg-gray-100 dark:text-gray-400 dark:bg-gray-900/20";case"in_progress":return"text-yellow-600 bg-yellow-100 dark:text-yellow-400 dark:bg-yellow-900/20";case"cancelled":return"text-red-600 bg-red-100 dark:text-red-400 dark:bg-red-900/20";default:return"text-blue-600 bg-blue-100 dark:text-blue-400 dark:bg-blue-900/20"}},k=d=>new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(J,{})}):e.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white",children:"My Tickets"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1 text-sm lg:text-base",children:"View and manage your support requests"})]}),e.jsxs(ne,{to:"/tickets/new",className:"inline-flex items-center px-3 lg:px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 text-sm lg:text-base",children:[e.jsx(he,{className:"h-4 lg:h-5 w-4 lg:w-5 mr-2"}),"New Ticket"]})]}),n&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 lg:gap-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 lg:p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-shadow duration-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 lg:p-3 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex-shrink-0",children:e.jsx(rt,{className:"h-5 lg:h-6 w-5 lg:w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-3 lg:ml-4",children:[e.jsx("p",{className:"text-xs lg:text-sm font-medium text-gray-600 dark:text-gray-400",children:"My Tickets"}),e.jsx("p",{className:"text-xl lg:text-2xl font-bold text-gray-900 dark:text-white",children:n.total})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 lg:p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-shadow duration-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 lg:p-3 bg-green-100 dark:bg-green-900/20 rounded-lg flex-shrink-0",children:e.jsx(me,{className:"h-5 lg:h-6 w-5 lg:w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-3 lg:ml-4",children:[e.jsx("p",{className:"text-xs lg:text-sm font-medium text-gray-600 dark:text-gray-400",children:"Open"}),e.jsx("p",{className:"text-xl lg:text-2xl font-bold text-gray-900 dark:text-white",children:n.open})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 lg:p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-shadow duration-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 lg:p-3 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex-shrink-0",children:e.jsx($e,{className:"h-5 lg:h-6 w-5 lg:w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"ml-3 lg:ml-4",children:[e.jsx("p",{className:"text-xs lg:text-sm font-medium text-gray-600 dark:text-gray-400",children:"Closed"}),e.jsx("p",{className:"text-xl lg:text-2xl font-bold text-gray-900 dark:text-white",children:n.closed})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 lg:p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 lg:h-5 w-4 lg:w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search tickets...",value:b,onChange:d=>g(d.target.value),className:"w-full pl-9 lg:pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm lg:text-base"})]}),e.jsxs("select",{value:m,onChange:d=>f(d.target.value),className:"px-3 lg:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm lg:text-base",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"closed",children:"Closed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),e.jsxs("select",{value:_,onChange:d=>E(d.target.value),className:"px-3 lg:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm lg:text-base",children:[e.jsx("option",{value:"",children:"All Categories"}),s.map(d=>e.jsx("option",{value:d.name,children:d.name},d.id))]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:w.length>0?e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:w.map(d=>e.jsx(ne,{to:`/tickets/${d.id}`,className:"block p-4 lg:p-6 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-3 lg:space-y-0",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 lg:gap-3 mb-2",children:[e.jsx("h3",{className:"text-base lg:text-lg font-semibold text-gray-900 dark:text-white",children:d.title}),e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j(d.status)}`,children:[A(d.status),e.jsx("span",{className:"ml-1",children:d.status.replace("_"," ")})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 lg:gap-4 text-xs lg:text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"inline-block w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:d.category_color}}),e.jsx("span",{children:d.category_name})]}),e.jsx("span",{children:"�"}),e.jsxs("span",{children:["Created ",k(d.created_at)]}),d.updated_at!==d.created_at&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"�"}),e.jsxs("span",{children:["Updated ",k(d.updated_at)]})]})]})]}),e.jsx("div",{className:"text-gray-400 flex-shrink-0 self-end lg:self-center",children:e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]})},d.id))}):e.jsxs("div",{className:"p-8 lg:p-12 text-center",children:[e.jsx(rt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"No tickets found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:b||m||_?"Try adjusting your filters":"Create your first support ticket"}),e.jsxs(ne,{to:"/tickets/new",className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Create Ticket"]})]})})]})},fn=()=>{const{id:t}=At(),r=Le(),{user:s}=fe(),[a,n]=c.useState(null),[o,l]=c.useState([]),[x,b]=c.useState([]),[g,m]=c.useState([]),[f,_]=c.useState([]),[E,w]=c.useState(!0),[A,j]=c.useState(""),[k,d]=c.useState(!1),[h,N]=c.useState(!1),[S,P]=c.useState(!1),[T,H]=c.useState(null),[R,D]=c.useState(""),[O,z]=c.useState(!1);c.useEffect(()=>{(async()=>{if(t)try{const[M,G]=await Promise.all([xe.getById(t),Ce.getAll()]);n(M.ticket),l(M.messages),b(M.logs),m(M.participants||[]),_(G)}catch(M){console.error("Failed to fetch ticket:",M),r("/tickets")}finally{w(!1)}})()},[t,r]);const I=async v=>{if(v.preventDefault(),!(!A.trim()||!t)){d(!0);try{await xe.addMessage(t,A),j("");const M=await xe.getById(t);l(M.messages),b(M.logs)}catch(M){console.error("Failed to send message:",M)}finally{d(!1)}}},Q=async v=>{if(t)try{await xe.updateStatus(t,v);const M=await xe.getById(t);n(M.ticket),b(M.logs)}catch(M){console.error("Failed to update status:",M)}},Y=async v=>{if(t)try{const M=await fetch(`/api/tickets/${t}/claim`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({claim:v})});if(M.ok){const G=await xe.getById(t);n(G.ticket),b(G.logs)}else{const G=await M.json();alert(G.error||"Failed to claim/unclaim ticket")}}catch(M){console.error("Failed to claim/unclaim ticket:",M)}},re=async()=>{if(!(!t||!R.trim())){z(!0);try{const v=await fetch(`/api/tickets/${t}/participants`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({discord_id:R.trim()})});if(v.ok){P(!1),D("");const M=await xe.getById(t);m(M.participants||[]),b(M.logs)}else{const M=await v.json();alert(M.error||"Failed to add user")}}catch(v){console.error("Failed to add user:",v),alert("Failed to add user")}finally{z(!1)}}},te=async v=>{if(!(!t||!confirm("Are you sure you want to remove this participant?")))try{const M=await fetch(`/api/tickets/${t}/participants/${v}`,{method:"DELETE",credentials:"include"});if(M.ok){const G=await xe.getById(t);m(G.participants||[]),b(G.logs)}else{const G=await M.json();alert(G.error||"Failed to remove participant")}}catch(M){console.error("Failed to remove participant:",M),alert("Failed to remove participant")}},ie=async()=>{if(!(!t||!T))try{await xe.transfer(t,T),N(!1);const v=await xe.getById(t);n(v.ticket),b(v.logs)}catch(v){console.error("Failed to transfer ticket:",v)}},Ne=v=>{switch(v){case"open":return"text-green-600 bg-green-100 dark:text-green-400 dark:bg-green-900/20";case"closed":return"text-gray-600 bg-gray-100 dark:text-gray-400 dark:bg-gray-900/20";case"in_progress":return"text-yellow-600 bg-yellow-100 dark:text-yellow-400 dark:bg-yellow-900/20";default:return"text-blue-600 bg-blue-100 dark:text-blue-400 dark:bg-blue-900/20"}},$=v=>new Date(v).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),q=(v,M)=>v?`https://cdn.discordapp.com/avatars/${M}/${v}.png`:`https://cdn.discordapp.com/embed/avatars/${parseInt(M)%5}.png`,Z=()=>{if(!a||!s)return{canManage:!1,canView:!1,canClaim:!1,canAddUsers:!1,canReopen:!1,canRemoveParticipants:!1,isOwner:!1,isSupportMember:!1};if(s.is_admin)return{canManage:!0,canView:!0,canClaim:!0,canAddUsers:!0,canReopen:!0,canRemoveParticipants:!0,isOwner:!1,isSupportMember:!0};const v=a.user_id===s.id,M=g.some(X=>X.user_id===s.id),G=f.find(X=>X.id===a.category_id);let Re=!1;G!=null&&G.required_role_id&&(Re=(s.roles||[]).map(Ee=>Ee.id).includes(G.required_role_id));const le=a.assigned_to===s.id,je=a.claimed_by===s.id;return Re||le||je?{canManage:!0,canView:!0,canClaim:!0,canAddUsers:!0,canReopen:!0,canRemoveParticipants:!0,isOwner:v,isSupportMember:!0}:v||M?{canManage:!0,canView:!0,canClaim:!1,canAddUsers:!1,canReopen:!1,canRemoveParticipants:!1,isOwner:v,isSupportMember:!1}:{canManage:!1,canView:!1,canClaim:!1,canAddUsers:!1,canReopen:!1,canRemoveParticipants:!1,isOwner:!1,isSupportMember:!1}};if(E)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(J,{})});if(!a)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Ticket not found"}),e.jsx("button",{onClick:()=>r("/tickets"),className:"mt-4 text-indigo-600 dark:text-indigo-400 hover:underline",children:"Return to tickets"})]});const se=Z();return se.canView?e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>r("/tickets"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200",children:e.jsx(Je,{className:"h-6 w-6 text-gray-600 dark:text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:a.title}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${Ne(a.status)}`,children:[a.status==="open"?e.jsx(me,{className:"h-4 w-4 mr-1"}):e.jsx($e,{className:"h-4 w-4 mr-1"}),a.status.replace("_"," ")]}),a.claimed_by_name&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:[e.jsx(We,{className:"h-4 w-4 mr-1"}),"Claimed by ",a.claimed_by_name]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[se.isSupportMember&&e.jsxs(e.Fragment,{children:[se.canClaim&&e.jsx("button",{onClick:()=>Y(!a.claimed_by),className:`px-4 py-2 rounded-lg transition-colors duration-200 shadow-lg hover:shadow-xl ${a.claimed_by===(s==null?void 0:s.id)?"bg-red-600 text-white hover:bg-red-700":"bg-blue-600 text-white hover:bg-blue-700"}`,children:a.claimed_by===(s==null?void 0:s.id)?"Unclaim":"Claim"}),se.canAddUsers&&e.jsxs("button",{onClick:()=>P(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200 shadow-lg hover:shadow-xl",children:[e.jsx(Er,{className:"h-4 w-4 mr-2 inline"}),"Add User"]}),e.jsx("button",{onClick:()=>N(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors duration-200 shadow-lg hover:shadow-xl",children:"Transfer"}),a.status==="open"&&e.jsx("button",{onClick:()=>Q("in_progress"),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors duration-200 shadow-lg hover:shadow-xl",children:"Mark In Progress"}),se.canReopen&&a.status==="closed"&&e.jsxs("button",{onClick:()=>Q("open"),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200 shadow-lg hover:shadow-xl",children:[e.jsx(ys,{className:"h-4 w-4 mr-2 inline"}),"Re-Open"]})]}),se.canManage&&a.status!=="closed"&&e.jsx("button",{onClick:()=>Q("closed"),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200 shadow-lg hover:shadow-xl",children:"Close Ticket"})]})]}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-dark-lg max-w-md w-full mx-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Add User to Ticket"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Discord ID"}),e.jsx("input",{type:"text",value:R,onChange:v=>D(v.target.value),placeholder:"Enter Discord ID (e.g., 123456789012345678)",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"The user will gain access to this ticket and see it on their dashboard."})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx("button",{onClick:()=>{P(!1),D("")},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:re,disabled:O||!R.trim(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:O?e.jsx(J,{}):"Add User"})]})]})]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-dark-lg max-w-md w-full mx-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Transfer Ticket"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Category"}),e.jsxs("select",{value:T||"",onChange:v=>H(v.target.value?parseInt(v.target.value):null),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Select a category"}),f.filter(v=>v.id!==a.category_id).map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:ie,disabled:!T,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:"Transfer"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-dark border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:q(a.user_avatar,a.user_discord_id),alt:a.user_name,className:"h-10 w-10 rounded-full ring-2 ring-gray-200 dark:ring-gray-700"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[a.user_name,"#",a.user_discriminator]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:$(a.created_at)})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-900 dark:text-white whitespace-pre-wrap leading-relaxed",children:a.description})})]}),e.jsx("div",{className:"space-y-4",children:o.map(v=>e.jsxs("div",{className:`p-6 rounded-xl shadow-dark border transition-all duration-200 hover:shadow-dark-lg ${v.is_staff_reply?"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 border-indigo-200 dark:border-indigo-800 ml-8":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:q(v.avatar,v.discord_id),alt:v.username,className:"h-8 w-8 rounded-full ring-2 ring-gray-200 dark:ring-gray-700"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white",children:[v.username,"#",v.discriminator]}),v.is_staff_reply&&e.jsx("span",{className:"px-2 py-1 bg-gradient-to-r from-indigo-100 to-purple-100 dark:from-indigo-900 dark:to-purple-900 text-indigo-800 dark:text-indigo-200 text-xs font-medium rounded-full",children:"Staff"})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:$(v.created_at)})]})]}),e.jsx("p",{className:"text-gray-900 dark:text-white whitespace-pre-wrap leading-relaxed",children:v.message})]},v.id))}),a.status!=="closed"&&e.jsx("form",{onSubmit:I,className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-dark border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:q((s==null?void 0:s.avatar)||"",(s==null?void 0:s.discord_id)||""),alt:s==null?void 0:s.username,className:"h-10 w-10 rounded-full ring-2 ring-gray-200 dark:ring-gray-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{value:A,onChange:v=>j(v.target.value),placeholder:"Type your reply...",rows:4,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 resize-none"}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{type:"submit",disabled:k||!A.trim(),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl glow-indigo",children:k?e.jsx(J,{}):e.jsxs(e.Fragment,{children:[e.jsx(wt,{className:"h-4 w-4 mr-2"}),"Send Reply"]})})})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-dark border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Ticket Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Dr,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Category"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"inline-block w-3 h-3 rounded-full",style:{backgroundColor:a.category_color}}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a.category_name})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Nt,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Created"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:$(a.created_at)})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(me,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Last Updated"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:$(a.updated_at)})]})]}),a.assigned_to_name&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(We,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Assigned To"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:a.assigned_to_name})]})]}),a.claimed_by_name&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(He,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Claimed By"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:a.claimed_by_name})]})]})]})]}),g.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-dark border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Additional Participants"}),e.jsx("div",{className:"space-y-3",children:g.map(v=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:q(v.avatar,v.discord_id),alt:v.username,className:"h-8 w-8 rounded-full"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[v.username,"#",v.discriminator]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Added by ",v.added_by_name," on ",$(v.added_at)]})]})]}),se.canRemoveParticipants&&e.jsx("button",{onClick:()=>te(v.id),className:"p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded transition-colors duration-200",title:"Remove participant",children:e.jsx(Rt,{className:"h-4 w-4"})})]},v.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-dark border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Activity Log"}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:x.slice(0,10).map(v=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsx(ar,{className:"h-4 w-4 text-gray-400 mt-1 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[e.jsx("span",{className:"font-medium",children:v.username})," ",v.action]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:$(v.created_at)})]})]},v.id))})]})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Access Denied"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"You don't have permission to view this ticket."}),e.jsx("button",{onClick:()=>r("/tickets"),className:"mt-4 text-indigo-600 dark:text-indigo-400 hover:underline",children:"Return to tickets"})]})},jn=({options:t,value:r,onChange:s,placeholder:a="Select an option",className:n="",disabled:o=!1})=>{const[l,x]=c.useState(!1),[b,g]=c.useState(""),m=c.useRef(null),f=c.useRef(null),_=r?t.find(k=>k.id.toString()===r.toString()):null,E=t.filter(k=>k.name.toLowerCase().includes(b.toLowerCase()));c.useEffect(()=>{const k=d=>{m.current&&!m.current.contains(d.target)&&(x(!1),g(""))};return document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[]);const w=k=>{s(k.id),x(!1),g("")},A=()=>{o||(x(!l),l||setTimeout(()=>{var k;(k=f.current)==null||k.focus()},100))},j=n.includes("border-red");return e.jsxs("div",{ref:m,className:`relative ${n}`,children:[e.jsx("button",{type:"button",onClick:A,disabled:o,className:`w-full px-4 py-3 text-left border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white transition-colors duration-200 ${j?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"} ${o?"opacity-50 cursor-not-allowed":"hover:border-gray-400 dark:hover:border-gray-500"}`,"aria-haspopup":"listbox","aria-expanded":l,"aria-label":_?`Selected: ${_.name}`:a,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:_?e.jsxs(e.Fragment,{children:[_.color&&e.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:_.color}}),e.jsx("span",{className:"truncate font-medium",children:_.name})]}):e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:a})}),e.jsx(Wt,{className:`h-5 w-5 text-gray-400 transition-transform duration-200 flex-shrink-0 ${l?"rotate-180":""}`})]})}),l&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[e.jsx("div",{className:"p-3 border-b border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"relative",children:[e.jsx(Oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{ref:f,type:"text",value:b,onChange:k=>g(k.target.value),placeholder:"Search categories...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm","aria-label":"Search categories"})]})}),e.jsx("div",{className:"max-h-48 overflow-y-auto",role:"listbox",children:E.length>0?E.map(k=>e.jsx("button",{type:"button",onClick:()=>w(k),className:`w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors duration-200 ${_&&k.id.toString()===_.id.toString()?"bg-indigo-50 dark:bg-indigo-900/20":""}`,role:"option","aria-selected":_&&k.id.toString()===_.id.toString(),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:[k.color&&e.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:k.color}}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:k.name}),k.description&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:k.description})]})]}),_&&k.id.toString()===_.id.toString()&&e.jsx(bs,{className:"h-4 w-4 text-indigo-600 dark:text-indigo-400 flex-shrink-0"})]})},k.id)):e.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400 text-center",children:"No categories found"})})]})]})},kn=()=>{const t=Le(),[r,s]=c.useState([]),[a,n]=c.useState(!0),[o,l]=c.useState(!1),[x,b]=c.useState({}),[g,m]=c.useState({title:"",description:"",category_id:""});c.useEffect(()=>{(async()=>{try{const d=await Ce.getAccessibleCategories();s(d)}catch(d){console.error("Failed to fetch categories:",d)}finally{n(!1)}})()},[]);const f=()=>{const k={};return g.title.trim()||(k.title="Title is required"),g.description.trim()||(k.description="Description is required"),g.category_id||(k.category_id="Please select a category"),b(k),Object.keys(k).length===0},_=async k=>{if(k.preventDefault(),b({}),!!f()){l(!0);try{const d=await xe.create({...g,category_id:parseInt(g.category_id)});t(`/tickets/${d.id}`)}catch(d){console.error("Failed to create ticket:",d),b({submit:"Failed to create ticket. Please try again."})}finally{l(!1)}}},E=k=>{const{name:d,value:h}=k.target;m(N=>({...N,[d]:h})),x[d]&&b(N=>{const S={...N};return delete S[d],S})},w=k=>{m(d=>({...d,category_id:k.toString()})),x.category_id&&b(d=>{const h={...d};return delete h.category_id,h})};if(a)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(J,{})});const A=r.map(k=>({id:k.id.toString(),name:k.name,description:k.description,color:k.color})),j=r.find(k=>k.id.toString()===g.category_id);return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>t("/tickets"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200",children:e.jsx(Je,{className:"h-6 w-6 text-gray-600 dark:text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Create New Ticket"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Describe your issue and we'll help you resolve it"})]})]}),x.submit&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800 dark:text-red-200 text-sm",children:x.submit})}),e.jsxs("form",{onSubmit:_,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Ticket Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"title",name:"title",value:g.title,onChange:E,required:!0,placeholder:"Brief description of your issue",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 ${x.title?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,"aria-describedby":x.title?"title-error":void 0}),x.title&&e.jsx("p",{id:"title-error",className:"mt-1 text-sm text-red-600 dark:text-red-400",role:"alert",children:x.title})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(jn,{options:A,value:g.category_id,onChange:w,placeholder:"Select a category",className:`w-full ${x.category_id?"border-red-300 dark:border-red-600":""}`}),x.category_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",role:"alert",children:x.category_id}),(j==null?void 0:j.description)&&!x.category_id&&e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:j.description})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"description",name:"description",value:g.description,onChange:E,required:!0,rows:8,placeholder:"Please provide detailed information about your issue, including any steps to reproduce the problem and what you expected to happen.",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 resize-none ${x.description?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,"aria-describedby":x.description?"description-error":void 0}),x.description&&e.jsx("p",{id:"description-error",className:"mt-1 text-sm text-red-600 dark:text-red-400",role:"alert",children:x.description})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{type:"button",onClick:()=>t("/tickets"),className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:o,className:"inline-flex items-center px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:o?e.jsxs(e.Fragment,{children:[e.jsx(J,{}),e.jsx("span",{className:"ml-2",children:"Creating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(wt,{className:"h-5 w-5 mr-2"}),"Create Ticket"]})})]})]})]})},wn=()=>{const{user:t}=fe(),[r,s]=c.useState("categories"),[a,n]=c.useState([]),[o,l]=c.useState([]),[x,b]=c.useState([]),[g,m]=c.useState({}),[f,_]=c.useState(!0),[E,w]=c.useState(!1),[A,j]=c.useState(!1),[k,d]=c.useState(!1),[h,N]=c.useState(!1),[S,P]=c.useState(!1),[T,H]=c.useState(null),[R,D]=c.useState(null),[O,z]=c.useState(null),[I,Q]=c.useState({name:"",description:"",required_role_id:"",color:"#5865F2",is_restricted:!1}),[Y,re]=c.useState({role_id:"",name:"",description:"",icon_url:"",emoji:"",can_add:!0,can_remove:!0,is_active:!0,display_order:0}),[te,ie]=c.useState({name:"",db_name:"",callsign_prefix:"",roster_view_id:"",classification:"department"}),[Ne,$]=c.useState({custom_logo_url:null,community_name:""}),[q,Z]=c.useState(!1),[se,v]=c.useState(""),[M,G]=c.useState(""),[Re,le]=c.useState({enableDepartments:!0,enableOrganizations:!0,enablePlayerRecord:!0,enableTimeclock:!0});c.useEffect(()=>{t!=null&&t.is_admin&&(je(),ot(),Ee())},[t]),c.useEffect(()=>{r==="roles"&&(t!=null&&t.is_admin)&&X()},[r,t]),c.useEffect(()=>{r==="departments"&&(t!=null&&t.is_admin)&&ve()},[r,t]),c.useEffect(()=>{(async()=>{const p=await cr();le(p)})()},[]);const je=async()=>{try{const i=await Ce.getAll();n(i)}catch(i){console.error("Failed to fetch categories:",i)}finally{_(!1)}},X=async()=>{w(!0);try{const i=await tt.getAdminSelfAssignable();l(i)}catch(i){console.error("Failed to fetch self-assignable roles:",i)}finally{w(!1)}},ve=async()=>{j(!0);try{const i=await ge.getAllAdmin();b(i)}catch(i){console.error("Failed to fetch departments:",i)}finally{j(!1)}},Ee=async()=>{try{const i=await is.getStats();m({users:i.users||0,total:i.total||0})}catch(i){console.error("Failed to fetch admin stats:",i)}},ot=async()=>{try{const i=await fetch("/api/settings/branding",{credentials:"include"});if(i.ok){const p=await i.json();$(p),v(p.custom_logo_url||""),G(p.community_name)}}catch(i){console.error("Failed to fetch branding settings:",i)}},Ie=async()=>{Z(!0);try{(await fetch("/api/settings/branding",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({custom_logo_url:se.trim()||null,community_name:M.trim()})})).ok?($({custom_logo_url:se.trim()||null,community_name:M.trim()}),window.location.reload()):console.error("Failed to update branding settings")}catch(i){console.error("Failed to update branding settings:",i)}finally{Z(!1)}},lt=async i=>{if(i.preventDefault(),!I.required_role_id.trim()){alert("Required role ID must be specified for all categories");return}try{T?await Ce.update(T.id.toString(),I):await Ce.create(I),await je(),d(!1),H(null),Q({name:"",description:"",required_role_id:"",color:"#5865F2",is_restricted:!1})}catch(p){console.error("Failed to save category:",p),alert("Failed to save category. Please check that the required role ID is provided.")}},dt=async i=>{if(i.preventDefault(),!Y.role_id.trim()||!Y.name.trim()){alert("Role ID and name are required");return}try{R?await tt.updateSelfAssignable(R.id.toString(),Y):await tt.createSelfAssignable(Y),await X(),N(!1),D(null),re({role_id:"",name:"",description:"",icon_url:"",emoji:"",can_add:!0,can_remove:!0,is_active:!0,display_order:0})}catch(p){console.error("Failed to save role:",p),alert("Failed to save role. Please check that the role ID is unique.")}},Ge=async i=>{var p,C;if(i.preventDefault(),!te.name.trim()||!te.db_name.trim()||!te.callsign_prefix.trim()||!te.roster_view_id.trim()){alert("All fields are required");return}try{O?await ge.update(O.id.toString(),te):await ge.create(te),await ve(),P(!1),z(null),ie({name:"",db_name:"",callsign_prefix:"",roster_view_id:"",classification:"department"})}catch(F){console.error("Failed to save department:",F),alert(((C=(p=F.response)==null?void 0:p.data)==null?void 0:C.error)||"Failed to save department.")}},Ke=i=>{H(i),Q({name:i.name,description:i.description||"",required_role_id:i.required_role_id||"",color:i.color,is_restricted:i.is_restricted||!1}),d(!0)},ct=i=>{D(i),re({role_id:i.role_id,name:i.name,description:i.description||"",icon_url:i.icon_url||"",emoji:i.emoji||"",can_add:i.can_add,can_remove:i.can_remove,is_active:i.is_active,display_order:i.display_order}),N(!0)},Ye=i=>{z(i),ie({name:i.name,db_name:i.db_name,callsign_prefix:i.callsign_prefix,roster_view_id:i.roster_view_id,classification:i.classification}),P(!0)},Xe=async i=>{if(confirm("Are you sure you want to delete this category?"))try{await Ce.delete(i.toString()),await je()}catch(p){console.error("Failed to delete category:",p),alert("Failed to delete category. It may have existing tickets.")}},Ze=async i=>{if(confirm("Are you sure you want to delete this role?"))try{await tt.deleteSelfAssignable(i.toString()),await X()}catch(p){console.error("Failed to delete role:",p),alert("Failed to delete role.")}},Fe=async i=>{var p,C;if(confirm("Are you sure you want to delete this department? This will also remove all roster members."))try{await ge.delete(i.toString()),await ve()}catch(F){console.error("Failed to delete department:",F),alert(((C=(p=F.response)==null?void 0:p.data)==null?void 0:C.error)||"Failed to delete department.")}},De=i=>{const{name:p,value:C,type:F}=i.target;Q(V=>({...V,[p]:F==="checkbox"?i.target.checked:C}))},ye=i=>{const{name:p,value:C,type:F}=i.target;re(V=>({...V,[p]:F==="checkbox"?i.target.checked:F==="number"?parseInt(C)||0:C}))},ke=i=>{const{name:p,value:C}=i.target;ie(F=>({...F,[p]:C}))};return t!=null&&t.is_admin?f?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(J,{})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Admin Panel"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage categories, branding, roles, departments, and system settings"})]}),r==="categories"&&e.jsxs("button",{onClick:()=>{d(!0),H(null),Q({name:"",description:"",required_role_id:"",color:"#5865F2",is_restricted:!1})},className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[e.jsx(he,{className:"h-5 w-5 mr-2"}),"New Category"]}),r==="roles"&&e.jsxs("button",{onClick:()=>{N(!0),D(null),re({role_id:"",name:"",description:"",icon_url:"",emoji:"",can_add:!0,can_remove:!0,is_active:!0,display_order:0})},className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[e.jsx(he,{className:"h-5 w-5 mr-2"}),"New Role"]}),r==="departments"&&e.jsxs("button",{onClick:()=>{P(!0),z(null),ie({name:"",db_name:"",callsign_prefix:"",roster_view_id:"",classification:"department"})},className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[e.jsx(he,{className:"h-5 w-5 mr-2"}),"New Department"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:e.jsx(Dr,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Categories"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-lg",children:e.jsx(Et,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:g.users||0})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:e.jsx(ze,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Departments"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:x.filter(i=>i.classification==="department").length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/20 rounded-lg",children:e.jsx(sr,{className:"h-6 w-6 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"System Status"}),e.jsx("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:"Operational"})]})]})})]}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>s("categories"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="categories"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Categories"}),e.jsx("button",{onClick:()=>s("branding"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="branding"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Branding"}),e.jsx("button",{onClick:()=>s("roles"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="roles"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Self-Assignable Roles"}),e.jsx("button",{onClick:()=>s("departments"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="departments"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Departments"})]})}),r==="categories"&&e.jsxs(e.Fragment,{children:[k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-xl max-w-md w-full mx-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:T?"Edit Category":"Create Category"}),e.jsxs("form",{onSubmit:lt,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:I.name,onChange:De,required:!0,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:I.description,onChange:De,rows:3,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"color",id:"color",name:"color",value:I.color,onChange:De,className:"w-12 h-10 border border-gray-300 dark:border-gray-600 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:I.color,onChange:De,name:"color",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"required_role_id",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Required Role ID ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"required_role_id",name:"required_role_id",value:I.required_role_id,onChange:De,required:!0,placeholder:"Discord role ID (required for all categories)",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"All categories must have a required role ID for support access"})]}),e.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"is_restricted",name:"is_restricted",checked:I.is_restricted,onChange:De,className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsxs("label",{htmlFor:"is_restricted",className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.jsx(vt,{className:"h-4 w-4 mr-2"}),"Restricted for Ticket Creation"]})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["When enabled, only users with the required role can ",e.jsx("strong",{children:"create tickets"})," in this category. When disabled, anyone can create tickets here. The required role is always needed for support access."]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:T?"Update":"Create"})]})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Ticket Categories"})}),e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:a.map(i=>e.jsx("div",{className:"p-6 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:i.color}}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:i.name}),i.is_restricted&&e.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-orange-100 dark:bg-orange-900/20 rounded-full",children:[e.jsx(vt,{className:"h-3 w-3 text-orange-600 dark:text-orange-400"}),e.jsx("span",{className:"text-xs font-medium text-orange-600 dark:text-orange-400",children:"Restricted Creation"})]})]}),i.description&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:i.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["Created by ",i.created_by_name]}),e.jsx("span",{children:" "}),e.jsx("span",{children:new Date(i.created_at).toLocaleDateString()}),i.required_role_id&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:" "}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ve,{className:"h-4 w-4"}),e.jsxs("span",{children:["Role: ",i.required_role_id]})]})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Ke(i),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200",children:e.jsx(pt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Xe(i.id),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200",children:e.jsx(we,{className:"h-4 w-4"})})]})]})},i.id))})]})]}),r==="branding"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center",children:[e.jsx(fs,{className:"h-6 w-6 mr-2"}),"Branding Settings"]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"communityName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Community Name"}),e.jsx("div",{className:"flex space-x-3",children:e.jsx("input",{type:"text",id:"communityName",value:M,onChange:i=>G(i.target.value),placeholder:"Enter community name",className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"The name that appears in the sidebar and browser title."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"logoUrl",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Custom Logo URL"}),e.jsx("div",{className:"flex space-x-3",children:e.jsx("input",{type:"url",id:"logoUrl",value:se,onChange:i=>v(i.target.value),placeholder:"https://example.com/logo.png",className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Enter a URL to an image that will replace the default logo. Leave empty to use default branding."}),se&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:se,alt:"Logo Preview",className:"h-8 w-8 object-contain",onError:i=>{i.currentTarget.style.display="none"}}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"This will appear in the sidebar"})]})]}),Ne.custom_logo_url&&e.jsx("div",{className:"mt-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:Ne.custom_logo_url,alt:"Current Logo",className:"h-6 w-6 object-contain"}),e.jsx("span",{className:"text-sm text-green-800 dark:text-green-200",children:"Custom logo is currently active"})]}),e.jsx("button",{onClick:()=>{v(""),Ie()},className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Rt,{className:"h-4 w-4"})})]})})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:Ie,disabled:q,className:"inline-flex items-center px-4 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:q?e.jsx(J,{}):e.jsxs(e.Fragment,{children:[e.jsx(at,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})})]})})]}),r==="roles"&&e.jsxs(e.Fragment,{children:[h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:R?"Edit Self-Assignable Role":"Create Self-Assignable Role"}),e.jsxs("form",{onSubmit:dt,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"role_id",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Discord Role ID ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"role_id",name:"role_id",value:Y.role_id,onChange:ye,required:!0,placeholder:"123456789012345678",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Role Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"name",name:"name",value:Y.name,onChange:ye,required:!0,placeholder:"VIP Member",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:Y.description,onChange:ye,rows:3,placeholder:"Optional description of what this role provides",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"icon_url",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Icon URL"}),e.jsx("input",{type:"url",id:"icon_url",name:"icon_url",value:Y.icon_url,onChange:ye,placeholder:"https://example.com/icon.png",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"emoji",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Emoji"}),e.jsx("input",{type:"text",id:"emoji",name:"emoji",value:Y.emoji,onChange:ye,placeholder:"?",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"display_order",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Order"}),e.jsx("input",{type:"number",id:"display_order",name:"display_order",value:Y.display_order,onChange:ye,min:"0",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Lower numbers appear first. Use 0 for default ordering."})]}),e.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Permissions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"can_add",name:"can_add",checked:Y.can_add,onChange:ye,className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("label",{htmlFor:"can_add",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Can Add"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"can_remove",name:"can_remove",checked:Y.can_remove,onChange:ye,className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("label",{htmlFor:"can_remove",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Can Remove"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"is_active",name:"is_active",checked:Y.is_active,onChange:ye,className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Active"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:R?"Update":"Create"})]})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Self-Assignable Roles"})}),E?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(J,{})}):e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:o.length>0?o.map(i=>e.jsx("div",{className:"p-6 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:i.emoji?e.jsx("span",{className:"text-2xl",children:i.emoji}):i.icon_url?e.jsx("img",{src:i.icon_url,alt:i.name,className:"w-8 h-8 object-contain"}):e.jsx(_t,{className:"h-8 w-8 text-indigo-500"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:i.name}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",i.role_id,")"]}),!i.is_active&&e.jsx("span",{className:"px-2 py-1 bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-400 text-xs font-medium rounded-full",children:"Inactive"})]}),i.description&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:i.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["Created by ",i.created_by_name]}),e.jsx("span",{children:" "}),e.jsx("span",{children:new Date(i.created_at).toLocaleDateString()}),e.jsx("span",{children:" "}),e.jsxs("span",{children:["Order: ",i.display_order]}),e.jsx("span",{children:" "}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:i.can_add?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:[(i.can_add,"?")," Add"]}),e.jsxs("span",{className:i.can_remove?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:[(i.can_remove,"?")," Remove"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>ct(i),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200",children:e.jsx(pt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Ze(i.id),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200",children:e.jsx(we,{className:"h-4 w-4"})})]})]})},i.id)):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(_t,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"No self-assignable roles"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Create your first self-assignable role to get started"})]})})]})]}),r==="departments"&&e.jsxs(e.Fragment,{children:[S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:O?"Edit Department/Organization":"Create Department/Organization"}),e.jsxs("form",{onSubmit:Ge,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"dept_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Department Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"dept_name",name:"name",value:te.name,onChange:ke,required:!0,placeholder:"Los Santos Police Department",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"classification",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Classification ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"classification",name:"classification",value:te.classification,onChange:ke,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"department",children:"Department"}),e.jsx("option",{value:"organization",children:"Organization"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"db_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Database Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"db_name",name:"db_name",value:te.db_name,onChange:ke,required:!0,placeholder:"lspd",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Used to access timeclock_i table data"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"callsign_prefix",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Callsign Prefix ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"callsign_prefix",name:"callsign_prefix",value:te.callsign_prefix,onChange:ke,required:!0,placeholder:"S-",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Example: S-01, P-15, etc."})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"roster_view_id",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Roster View Role ID ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"roster_view_id",name:"roster_view_id",value:te.roster_view_id,onChange:ke,required:!0,placeholder:"Discord Role ID (123456789012345678)",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Discord Role ID - users with this role can manage and view this roster"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>P(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:O?"Update":"Create"})]})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Departments & Organizations"})}),A?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(J,{})}):e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:x.length>0?x.map(i=>e.jsx("div",{className:"p-6 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200",children:(i.classification==="department"&&Re.enableDepartments||i.classification==="organization"&&Re.enableOrganizations)&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:i.classification==="organization"?e.jsx(gt,{className:"h-8 w-8 text-purple-500"}):e.jsx(ze,{className:"h-8 w-8 text-blue-500"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:i.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${i.classification==="organization"?"bg-purple-100 dark:bg-purple-900/20 text-purple-800 dark:text-purple-400":"bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-400"}`,children:i.classification})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["DB: ",i.db_name]}),e.jsx("span",{}),e.jsxs("span",{children:["Prefix: ",i.callsign_prefix]}),e.jsx("span",{}),e.jsxs("span",{children:[i.roster_count||0," members"]}),e.jsx("span",{}),e.jsxs("span",{children:["Created by ",i.created_by_name]})]}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:["Roster Role ID: ",i.roster_view_id]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Ye(i),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200",children:e.jsx(pt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Fe(i.id),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200",children:e.jsx(we,{className:"h-4 w-4"})})]})]})})},i.id)):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ze,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"No departments or organizations"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Create your first department or organization to get started"})]})})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ve,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Access Denied"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"You need administrator privileges to access this page."})]})},Nn=()=>{const{user:t}=fe(),r=Le(),[s,a]=c.useState([]),[n,o]=c.useState([]),[l,x]=c.useState(!0);c.useEffect(()=>{(async()=>{try{const[f,_]=await Promise.all([Ce.getSupportCategories(),xe.getAll({assigned:"true",status:"open"})]);a(f||[]),o(_||[]),((f==null?void 0:f.length)===0||!f)&&(t!=null&&t.is_admin)}catch(f){console.error("Failed to fetch support data:",f),a([]),o([])}finally{x(!1)}})()},[t]);const b=m=>{switch(m){case"open":return"text-green-600 bg-green-100 dark:text-green-400 dark:bg-green-900/20";case"closed":return"text-gray-600 bg-gray-100 dark:text-gray-400 dark:bg-gray-900/20";case"in_progress":return"text-yellow-600 bg-yellow-100 dark:text-yellow-400 dark:bg-yellow-900/20";default:return"text-blue-600 bg-blue-100 dark:text-blue-400 dark:bg-blue-900/20"}},g=m=>new Date(m).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(J,{})}):((s==null?void 0:s.length)===0||!s)&&!(t!=null&&t.is_admin)?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Rr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"No Support Access"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"You don't have access to any support categories. Contact an administrator if you need support permissions."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Support Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage tickets in your assigned categories"})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/20 rounded-lg",children:e.jsx(We,{className:"h-6 w-6 text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"My Assigned Tickets"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Tickets assigned to or claimed by you"})]})]}),e.jsx("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:(n==null?void 0:n.length)||0})]})}),n&&n.length>0?e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700 max-h-96 overflow-y-auto",children:n.slice(0,10).map(m=>e.jsx(ne,{to:`/tickets/${m.id}`,className:"block p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white truncate",children:m.title}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${b(m.status)}`,children:m.status.replace("_"," ")}),m.claimed_by_name&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:"Claimed"})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"inline-block w-3 h-3 rounded-full",style:{backgroundColor:m.category_color}}),e.jsx("span",{children:m.category_name})]}),e.jsx("span",{children:"�"}),e.jsx("span",{children:m.user_name}),e.jsx("span",{children:"�"}),e.jsx("span",{children:g(m.created_at)})]})]}),e.jsx("div",{className:"text-gray-400",children:e.jsx(Ue,{className:"h-5 w-5"})})]})},m.id))}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(We,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No tickets assigned to you"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Browse by Category"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s&&s.map(m=>e.jsxs("button",{onClick:()=>r(`/support/category/${m.id}`),className:"p-4 rounded-lg border-2 border-gray-200 dark:border-gray-700 hover:border-indigo-300 dark:hover:border-indigo-600 transition-all duration-200 text-left hover:shadow-lg group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:m.color}}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:m.name})]}),e.jsx(js,{className:"h-5 w-5 text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors duration-200"})]}),m.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:m.description}),e.jsx("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(rt,{className:"h-4 w-4"}),e.jsx("span",{children:"View Tickets"})]})})]},m.id))})]})]})},vn=()=>{const{categoryId:t}=At(),r=Le(),{user:s}=fe(),[a,n]=c.useState(null),[o,l]=c.useState([]),[x,b]=c.useState(!0),[g,m]=c.useState(""),[f,_]=c.useState("open"),[E,w]=c.useState("");c.useEffect(()=>{(async()=>{if(t)try{if(!(await Ce.getSupportCategories()).find(H=>H.id.toString()===t)&&!(s!=null&&s.is_admin)){r("/support");return}const[S,P]=await Promise.all([Ce.getAll(),xe.getAll({support:"true",category:t})]),T=S.find(H=>H.id.toString()===t);if(!T){r("/support");return}n(T),l(P||[])}catch(h){console.error("Failed to fetch category data:",h),r("/support")}finally{b(!1)}})()},[t,s,r]);const A=o.filter(d=>{const h=!g||d.title.toLowerCase().includes(g.toLowerCase())||d.user_name.toLowerCase().includes(g.toLowerCase()),N=!f||d.status===f,S=!E||E==="claimed"&&d.claimed_by_name||E==="unclaimed"&&!d.claimed_by_name;return h&&N&&S}),j=d=>{switch(d){case"open":return"text-green-600 bg-green-100 dark:text-green-400 dark:bg-green-900/20";case"closed":return"text-gray-600 bg-gray-100 dark:text-gray-400 dark:bg-gray-900/20";case"in_progress":return"text-yellow-600 bg-yellow-100 dark:text-yellow-400 dark:bg-yellow-900/20";default:return"text-blue-600 bg-blue-100 dark:text-blue-400 dark:bg-blue-900/20"}},k=d=>new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return x?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(J,{})}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>r("/support"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200",children:e.jsx(Je,{className:"h-6 w-6 text-gray-600 dark:text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:a.color}}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:a.name})]}),a.description&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a.description})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search tickets...",value:g,onChange:d=>m(d.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("select",{value:f,onChange:d=>_(d.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"closed",children:"Closed"})]}),e.jsxs("select",{value:E,onChange:d=>w(d.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"All Tickets"}),e.jsx("option",{value:"claimed",children:"Claimed"}),e.jsx("option",{value:"unclaimed",children:"Unclaimed"})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center",children:[e.jsx("span",{className:"font-medium",children:A.length}),e.jsx("span",{className:"ml-1",children:"tickets found"})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Category Tickets"})}),A.length>0?e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:A.map(d=>e.jsx(ne,{to:`/tickets/${d.id}`,className:"block p-6 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:d.title}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j(d.status)}`,children:d.status.replace("_"," ")}),d.claimed_by_name&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:[e.jsx(He,{className:"h-3 w-3 mr-1"}),"Claimed by ",d.claimed_by_name]}),d.assigned_to_name&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",children:[e.jsx(We,{className:"h-3 w-3 mr-1"}),"Assigned to ",d.assigned_to_name]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"h-4 w-4"}),e.jsx("span",{children:d.user_name})]}),e.jsx("span",{children:"�"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Nt,{className:"h-4 w-4"}),e.jsxs("span",{children:["Created ",k(d.created_at)]})]}),d.updated_at!==d.created_at&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"�"}),e.jsxs("span",{children:["Updated ",k(d.updated_at)]})]})]})]}),e.jsx("div",{className:"text-gray-400",children:e.jsx(Je,{className:"h-5 w-5 rotate-180"})})]})},d.id))}):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(rt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"No tickets found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:g||f||E?"Try adjusting your filters":"No tickets in this category"})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Category not found"}),e.jsx("button",{onClick:()=>r("/support"),className:"mt-4 text-indigo-600 dark:text-indigo-400 hover:underline",children:"Return to support dashboard"})]})},_n={"Emergency Services":Ve,"Civilian Services":Tr,Teams:ws,General:be},Sr={"Emergency Services":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400","Civilian Services":"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",Teams:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",General:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"},Sn=()=>{const{user:t}=fe(),r=Le(),[s,a]=c.useState([]),[n,o]=c.useState([]),[l,x]=c.useState(!0),[b,g]=c.useState("public");c.useEffect(()=>{(async()=>{try{const[h,N]=await Promise.all([Se.getPublic(),Se.getAll().catch(()=>[])]);o(h),a(N),g("public")}catch(h){console.error("Failed to fetch applications:",h)}finally{x(!1)}})()},[t]);const m=d=>new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),f=d=>{const h=s.find(T=>T.id===d);if(!h){r(`/applications/${d}`);return}const S=((t==null?void 0:t.roles)||[]).map(T=>T.id),P=(t==null?void 0:t.is_admin)||h.admin_role_id&&S.includes(h.admin_role_id)||h.moderator_role_id&&S.includes(h.moderator_role_id);r(P?`/applications/${d}?mode=manage`:`/applications/${d}`)},_=d=>{const h=s.find(T=>T.id===d);if(!h)return;const S=((t==null?void 0:t.roles)||[]).map(T=>T.id);((t==null?void 0:t.is_admin)||h.admin_role_id&&S.includes(h.admin_role_id))&&r(`/applications/${d}?mode=edit`)},E=d=>_n[d]||be,w=d=>Sr[d]||Sr.General,A=d=>{if(Array.isArray(d))return d;if(typeof d=="string")try{const h=JSON.parse(d);return Array.isArray(h)?h:[]}catch{return[]}return[]},j=n.reduce((d,h)=>{const N=h.category||"General";return d[N]||(d[N]=[]),d[N].push(h),d},{});if(l)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(J,{})});const k=s.length>0;return e.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white",children:"Applications"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1 text-sm lg:text-base",children:"Apply for roles and manage application forms"})]}),(t==null?void 0:t.is_admin)&&e.jsxs(ne,{to:"/applications/new",className:"inline-flex items-center px-3 lg:px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 text-sm lg:text-base",children:[e.jsx(he,{className:"h-4 lg:h-5 w-4 lg:w-5 mr-2"}),"Create Application"]})]}),k&&e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsxs("nav",{className:"-mb-px flex space-x-4 lg:space-x-8 overflow-x-auto",children:[e.jsx("button",{onClick:()=>g("public"),className:`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${b==="public"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Available Applications"}),e.jsx("button",{onClick:()=>g("manage"),className:`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${b==="manage"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Manage Applications"})]})}),b==="public"&&e.jsx("div",{className:"space-y-6 lg:space-y-8",children:Object.keys(j).length>0?Object.entries(j).map(([d,h])=>{const N=E(d);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg flex-shrink-0",children:e.jsx(N,{className:"h-5 lg:h-6 w-5 lg:w-6 text-gray-600 dark:text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg lg:text-xl font-semibold text-gray-900 dark:text-white",children:d}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[h.length," application",h.length!==1?"s":""," available"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6",children:h.map(S=>{const P=A(S.questions),T=!S.is_active;return e.jsx("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all duration-200 overflow-hidden ${T?"opacity-60":""}`,children:e.jsxs("div",{className:"p-4 lg:p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`p-2 lg:p-3 rounded-lg flex-shrink-0 ${T?"bg-gray-100 dark:bg-gray-700":"bg-indigo-100 dark:bg-indigo-900/20"}`,children:T?e.jsx(vt,{className:"h-5 lg:h-6 w-5 lg:w-6 text-gray-400"}):e.jsx(be,{className:"h-5 lg:h-6 w-5 lg:w-6 text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{className:"flex flex-col items-end space-y-2 ml-3",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${w(d)}`,children:d}),T&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",children:"Closed"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[P.length," questions"]})]})]}),e.jsx("h3",{className:"text-lg lg:text-xl font-semibold text-gray-900 dark:text-white mb-2",children:S.name}),S.description&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4 line-clamp-3",children:S.description}),T?e.jsxs("div",{className:"inline-flex items-center w-full justify-center px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 rounded-lg cursor-not-allowed text-sm lg:text-base",children:[e.jsx(vt,{className:"h-4 w-4 mr-2"}),"Application Closed"]}):e.jsxs(ne,{to:`/applications/${S.id}`,className:"inline-flex items-center w-full justify-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200 text-sm lg:text-base",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Apply Now"]})]})},S.id)})})]},d)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(be,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"No applications available"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Check back later for new application opportunities"})]})}),b==="manage"&&k&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:s.length>0?e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:s.map(d=>{const h=A(d.questions),S=((t==null?void 0:t.roles)||[]).map(H=>H.id),P=(t==null?void 0:t.is_admin)||d.admin_role_id&&S.includes(d.admin_role_id),T=(t==null?void 0:t.is_admin)||d.admin_role_id&&S.includes(d.admin_role_id)||d.moderator_role_id&&S.includes(d.moderator_role_id);return e.jsx("div",{className:"p-4 lg:p-6 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 lg:gap-3 mb-2",children:[e.jsx("h3",{className:"text-base lg:text-lg font-semibold text-gray-900 dark:text-white",children:d.name}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${w(d.category||"General")}`,children:d.category||"General"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d.is_active?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:d.is_active?"Active":"Inactive"})]}),d.description&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2 text-sm lg:text-base",children:d.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 lg:gap-4 text-xs lg:text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:[h.length," questions"]}),e.jsx("span",{children:"�"}),e.jsxs("span",{children:["Created by ",d.created_by_name]}),e.jsx("span",{children:"�"}),e.jsx("span",{children:m(d.created_at)})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[T&&e.jsx("button",{onClick:()=>f(d.id),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200",title:"View submissions",children:e.jsx(ks,{className:"h-4 w-4"})}),P&&e.jsx("button",{onClick:()=>_(d.id),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200",title:"Edit application",children:e.jsx(sr,{className:"h-4 w-4"})})]})]})},d.id)})}):e.jsxs("div",{className:"p-8 lg:p-12 text-center",children:[e.jsx(be,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"No applications to manage"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"You don't have management access to any applications"}),(t==null?void 0:t.is_admin)&&e.jsxs(ne,{to:"/applications/new",className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Create Application"]})]})})]})},Cn=["Emergency Services","Civilian Services","Teams","General"],An=()=>{const t=Le(),{user:r}=fe(),[s,a]=c.useState(!1),[n,o]=c.useState({name:"",description:"",admin_role_id:"",moderator_role_id:"",accepted_roles:[""],category:"General",webhook_url:"",webhook_role_id:""}),[l,x]=c.useState([{id:"1",type:"text",question:"",required:!0,options:[]}]);if(!(r!=null&&r.is_admin))return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Access Denied"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Only administrators can create applications."})]});const b=h=>{o(N=>({...N,[h.target.name]:h.target.value}))},g=(h,N)=>{const S=[...n.accepted_roles];S[h]=N,o(P=>({...P,accepted_roles:S}))},m=()=>{o(h=>({...h,accepted_roles:[...h.accepted_roles,""]}))},f=h=>{o(N=>({...N,accepted_roles:N.accepted_roles.filter((S,P)=>P!==h)}))},_=()=>{const h={id:Date.now().toString(),type:"text",question:"",required:!0,options:[]};x(N=>[...N,h])},E=(h,N,S)=>{x(P=>P.map(T=>T.id===h?{...T,[N]:S}:T))},w=h=>{x(N=>N.filter(S=>S.id!==h))},A=h=>{x(N=>N.map(S=>S.id===h?{...S,options:[...S.options||[],""]}:S))},j=(h,N,S)=>{x(P=>P.map(T=>{var H;return T.id===h?{...T,options:((H=T.options)==null?void 0:H.map((R,D)=>D===N?S:R))||[]}:T}))},k=(h,N)=>{x(S=>S.map(P=>{var T;return P.id===h?{...P,options:((T=P.options)==null?void 0:T.filter((H,R)=>R!==N))||[]}:P}))},d=async h=>{h.preventDefault(),a(!0);try{const N={...n,accepted_roles:n.accepted_roles.filter(S=>S.trim()!==""),questions:l.filter(S=>S.question.trim()!=="")};await Se.create(N),t("/applications")}catch(N){console.error("Failed to create application:",N)}finally{a(!1)}};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>t("/applications"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200",children:e.jsx(Je,{className:"h-6 w-6 text-gray-600 dark:text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Create Application"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Design a new application form for role assignments"})]})]}),e.jsxs("form",{onSubmit:d,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Application Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:b,required:!0,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),e.jsx("select",{id:"category",name:"category",value:n.category,onChange:b,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:Cn.map(h=>e.jsx("option",{value:h,children:h},h))})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:n.description,onChange:b,rows:3,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Discord Webhook Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"webhook_url",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Webhook URL"}),e.jsx("input",{type:"url",id:"webhook_url",name:"webhook_url",value:n.webhook_url,onChange:b,placeholder:"https://discord.com/api/webhooks/...",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"webhook_role_id",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role ID to Ping"}),e.jsx("input",{type:"text",id:"webhook_role_id",name:"webhook_role_id",value:n.webhook_role_id,onChange:b,placeholder:"Discord role ID",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsx("p",{className:"mt-3 text-sm text-gray-500 dark:text-gray-400",children:"Configure Discord webhook notifications for new application submissions. The role will be pinged when someone submits an application."})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Role Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"admin_role_id",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Admin Role ID"}),e.jsx("input",{type:"text",id:"admin_role_id",name:"admin_role_id",value:n.admin_role_id,onChange:b,placeholder:"Discord role ID for admins",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"moderator_role_id",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Moderator Role ID"}),e.jsx("input",{type:"text",id:"moderator_role_id",name:"moderator_role_id",value:n.moderator_role_id,onChange:b,placeholder:"Discord role ID for moderators",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Roles to Assign When Accepted"}),n.accepted_roles.map((h,N)=>e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("input",{type:"text",value:h,onChange:S=>g(N,S.target.value),placeholder:"Discord role ID",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),n.accepted_roles.length>1&&e.jsx("button",{type:"button",onClick:()=>f(N),className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-lg transition-colors duration-200",children:e.jsx(we,{className:"h-4 w-4"})})]},N)),e.jsxs("button",{type:"button",onClick:m,className:"inline-flex items-center px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200",children:[e.jsx(he,{className:"h-4 w-4 mr-1"}),"Add Role"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Application Questions"}),e.jsxs("button",{type:"button",onClick:_,className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Add Question"]})]}),e.jsx("div",{className:"space-y-6",children:l.map((h,N)=>{var S;return e.jsxs("div",{className:"p-6 border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:["Question ",N+1]}),l.length>1&&e.jsx("button",{type:"button",onClick:()=>w(h.id),className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-lg transition-colors duration-200",children:e.jsx(we,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Question Type"}),e.jsxs("select",{value:h.type,onChange:P=>E(h.id,"type",P.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"text",children:"Short Text"}),e.jsx("option",{value:"textarea",children:"Long Text"}),e.jsx("option",{value:"select",children:"Dropdown"}),e.jsx("option",{value:"radio",children:"Multiple Choice"}),e.jsx("option",{value:"checkbox",children:"Checkboxes"})]})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:h.required,onChange:P=>E(h.id,"required",P.target.checked),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Required"})]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Question Text"}),e.jsx("input",{type:"text",value:h.question,onChange:P=>E(h.id,"question",P.target.value),placeholder:"Enter your question...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(h.type==="select"||h.type==="radio"||h.type==="checkbox")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Options"}),(S=h.options)==null?void 0:S.map((P,T)=>e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("input",{type:"text",value:P,onChange:H=>j(h.id,T,H.target.value),placeholder:`Option ${T+1}`,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("button",{type:"button",onClick:()=>k(h.id,T),className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-lg transition-colors duration-200",children:e.jsx(we,{className:"h-4 w-4"})})]},T)),e.jsxs("button",{type:"button",onClick:()=>A(h.id),className:"inline-flex items-center px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200",children:[e.jsx(he,{className:"h-4 w-4 mr-1"}),"Add Option"]})]})]},h.id)})})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>t("/applications"),className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:s||!n.name.trim(),className:"inline-flex items-center px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:s?e.jsxs(e.Fragment,{children:[e.jsx(J,{}),e.jsx("span",{className:"ml-2",children:"Creating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(at,{className:"h-5 w-5 mr-2"}),"Create Application"]})})]})]})]})},Rn=["Emergency Services","Civilian Services","Teams","General"],Vt=t=>{if(Array.isArray(t))return t;if(typeof t=="string")try{const r=JSON.parse(t);return Array.isArray(r)?r:[]}catch{return[]}if(t&&typeof t=="object"){const r=Object.keys(t);if(r.length===0)return[];if(r.every(s=>!isNaN(parseInt(s))))return Object.values(t).filter(s=>s&&typeof s=="object")}return[]},Cr=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return{}}return t&&typeof t=="object"?t:{}},En=()=>{const{id:t}=At(),r=Le();fe();const[s]=tr(),a=s.get("mode")||"apply",[n,o]=c.useState(null),[l,x]=c.useState([]),[b,g]=c.useState(!0),[m,f]=c.useState(!1),[_,E]=c.useState(!1),[w,A]=c.useState({}),[j,k]=c.useState({}),[d,h]=c.useState({name:"",description:"",admin_role_id:"",moderator_role_id:"",accepted_roles:[""],category:"General",webhook_url:"",webhook_role_id:"",is_active:!0,questions:[]}),[N,S]=c.useState(""),[P,T]=c.useState("");c.useState([]),c.useState(!1);const[H,R]=c.useState(new Set),[D,O]=c.useState("date"),[z,I]=c.useState("desc"),[Q,Y]=c.useState(null),[re,te]=c.useState(""),[ie,Ne]=c.useState(""),[$,q]=c.useState(!1),[Z,se]=c.useState({total:0,pending:0,accepted:0,denied:0});c.useEffect(()=>{(async()=>{try{const p=await Se.getOne(t);if(o(p),(await Se.getMySubmissions(t)).some(W=>W.status==="pending")&&a==="apply"){r(`/applications/${t}/pending`);return}const V=Vt(p.questions);if(a==="edit"&&h({name:p.name,description:p.description,admin_role_id:p.admin_role_id||"",moderator_role_id:p.moderator_role_id||"",accepted_roles:JSON.parse(p.accepted_roles||"[]"),category:p.category||"General",webhook_url:p.webhook_url||"",webhook_role_id:p.webhook_role_id||"",is_active:p.is_active,questions:V}),a==="manage"){const K=(await Se.getSubmissions(t)).map(_e=>({..._e,responses:Cr(_e.responses)}));x(K);const ce=K.length,et=K.filter(_e=>_e.status==="pending").length,Me=K.filter(_e=>_e.status==="accepted").length,Pe=K.filter(_e=>_e.status==="denied").length;se({total:ce,pending:et,accepted:Me,denied:Pe})}}catch(p){console.error("Failed to fetch application:",p),r("/applications")}finally{g(!1)}})()},[t,a,r]);const v=(i,p)=>{A(C=>({...C,[i]:p})),j[i]&&k(C=>{const F={...C};return delete F[i],F})},M=()=>{if(!n)return!1;const i=Vt(n.questions),p={};return i.forEach(C=>{if(C.required){const F=w[C.id];(!F||Array.isArray(F)&&F.length===0||typeof F=="string"&&!F.trim())&&(p[C.id]="This field is required")}}),k(p),Object.keys(p).length===0},G=async i=>{var p,C;if(i.preventDefault(),!(!t||!M())){f(!0);try{await Se.submit(t,w),r("/applications?submitted=true")}catch(F){console.error("Failed to submit application:",F),((C=(p=F.response)==null?void 0:p.data)==null?void 0:C.error)==="You already have a pending application for this form"?r(`/applications/${t}/pending`):alert("Failed to submit application. Please try again.")}finally{f(!1)}}},Re=async i=>{if(i.preventDefault(),!!t){E(!0);try{const p={...d,accepted_roles:d.accepted_roles.filter(C=>C.trim()!==""),questions:d.questions.filter(C=>C.question.trim()!=="")};await Se.update(t,p),r("/applications?updated=true")}catch(p){console.error("Failed to update application:",p),alert("Failed to update application. Please try again.")}finally{E(!1)}}},le=async()=>{if(!(!Q||!re)){q(!0);try{await Se.reviewSubmission(t,Q.id.toString(),{status:re,admin_notes:ie.trim()});const p=(await Se.getSubmissions(t)).map(K=>({...K,responses:Cr(K.responses)}));x(p);const C=p.length,F=p.filter(K=>K.status==="pending").length,V=p.filter(K=>K.status==="accepted").length,W=p.filter(K=>K.status==="denied").length;se({total:C,pending:F,accepted:V,denied:W}),Y(null),te(""),Ne("")}catch(i){console.error("Failed to review submission:",i),alert("Failed to review submission. Please try again.")}finally{q(!1)}}},je=()=>{const i={id:Date.now().toString(),type:"text",question:"",required:!0,options:[]};h(p=>({...p,questions:[...p.questions,i]}))},X=(i,p,C)=>{h(F=>({...F,questions:F.questions.map(V=>V.id===i?{...V,[p]:C}:V)}))},ve=i=>{h(p=>({...p,questions:p.questions.filter(C=>C.id!==i)}))},Ee=i=>{h(p=>({...p,questions:p.questions.map(C=>C.id===i?{...C,options:[...C.options||[],""]}:C)}))},ot=(i,p,C)=>{h(F=>({...F,questions:F.questions.map(V=>{var W;return V.id===i?{...V,options:((W=V.options)==null?void 0:W.map((K,ce)=>ce===p?C:K))||[]}:V})}))},Ie=(i,p)=>{h(C=>({...C,questions:C.questions.map(F=>{var V;return F.id===i?{...F,options:((V=F.options)==null?void 0:V.filter((W,K)=>K!==p))||[]}:F})}))},lt=()=>{h(i=>({...i,accepted_roles:[...i.accepted_roles,""]}))},dt=(i,p)=>{h(C=>({...C,accepted_roles:C.accepted_roles.map((F,V)=>V===i?p:F)}))},Ge=i=>{h(p=>({...p,accepted_roles:p.accepted_roles.filter((C,F)=>F!==i)}))},Ke=i=>{switch(i){case"accepted":return e.jsx($e,{className:"h-4 w-4 text-green-600 dark:text-green-400"});case"denied":return e.jsx(st,{className:"h-4 w-4 text-red-600 dark:text-red-400"});default:return e.jsx(me,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"})}},ct=i=>{switch(i){case"accepted":return"text-green-600 bg-green-100 dark:text-green-400 dark:bg-green-900/20";case"denied":return"text-red-600 bg-red-100 dark:text-red-400 dark:bg-red-900/20";default:return"text-yellow-600 bg-yellow-100 dark:text-yellow-400 dark:bg-yellow-900/20"}},Ye=i=>new Date(i).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),Xe=(i,p)=>i?`https://cdn.discordapp.com/avatars/${p}/${i}.png`:`https://cdn.discordapp.com/embed/avatars/${parseInt(p)%5}.png`,Fe=[...l.filter(i=>{const p=!N||i.username.toLowerCase().includes(N.toLowerCase())||i.discord_id.includes(N),C=!P||i.status===P;return p&&C})].sort((i,p)=>{let C,F;switch(D){case"name":C=i.username.toLowerCase(),F=p.username.toLowerCase();break;case"status":C=i.status,F=p.status;break;case"date":default:C=new Date(i.submitted_at).getTime(),F=new Date(p.submitted_at).getTime();break}return z==="asc"?C<F?-1:C>F?1:0:C>F?-1:C<F?1:0}),De=i=>{R(p=>{const C=new Set(p);return C.has(i)?C.delete(i):C.add(i),C})},ye=i=>{const p=w[i.id]||"",F=`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${!!j[i.id]?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`;switch(i.type){case"text":return e.jsx("input",{type:"text",value:p,onChange:W=>v(i.id,W.target.value),className:F,placeholder:"Enter your answer..."});case"textarea":return e.jsx("textarea",{value:p,onChange:W=>v(i.id,W.target.value),rows:4,className:`${F} resize-none`,placeholder:"Enter your detailed answer..."});case"select":return e.jsxs("select",{value:p,onChange:W=>v(i.id,W.target.value),className:F,children:[e.jsx("option",{value:"",children:"Select an option..."}),(i.options||[]).map((W,K)=>e.jsx("option",{value:W,children:W},K))]});case"radio":return e.jsx("div",{className:"space-y-3",children:(i.options||[]).map((W,K)=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"radio",name:i.id,value:W,checked:p===W,onChange:ce=>v(i.id,ce.target.value),className:"text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:W})]},K))});case"checkbox":const V=Array.isArray(p)?p:[];return e.jsx("div",{className:"space-y-3",children:(i.options||[]).map((W,K)=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:V.includes(W),onChange:ce=>{const et=ce.target.checked?[...V,W]:V.filter(Me=>Me!==W);v(i.id,et)},className:"text-indigo-600 focus:ring-indigo-500 rounded"}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:W})]},K))});default:return null}};if(b)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(J,{})});if(!n)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx(be,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Application not found"}),e.jsx("button",{onClick:()=>r("/applications"),className:"mt-4 text-indigo-600 dark:text-indigo-400 hover:underline",children:"Return to applications"})]});const ke=Vt(n.questions);return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>r("/applications"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200",children:e.jsx(Je,{className:"h-6 w-6 text-gray-600 dark:text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:n.name}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800 dark:bg-indigo-900/20 dark:text-indigo-400",children:n.category}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${n.is_active?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:n.is_active?"Active":"Inactive"}),a==="manage"&&e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[ke.length," questions   ",Z.total," submissions"]})]})]}),a==="edit"&&e.jsxs("button",{onClick:Re,disabled:_,className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[_?e.jsx(J,{}):e.jsx(at,{className:"h-4 w-4 mr-2"}),_?"Saving...":"Save Changes"]})]}),n.description&&e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:e.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:n.description})}),a==="apply"&&e.jsxs("form",{onSubmit:G,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Application Questions"}),e.jsx("div",{className:"space-y-8",children:ke.map((i,p)=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsxs("span",{children:["Question ",p+1]}),i.required&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("span",{className:"block mt-1 text-base font-normal",children:i.question})]}),ye(i),j[i.id]&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:j[i.id]})]},i.id))})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>r("/applications"),className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m||!n.is_active,className:"inline-flex items-center px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:m?e.jsxs(e.Fragment,{children:[e.jsx(J,{}),e.jsx("span",{className:"ml-2",children:"Submitting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(wt,{className:"h-5 w-5 mr-2"}),"Submit Application"]})})]})]}),a==="manage"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:e.jsx(be,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Z.total})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900/20 rounded-lg",children:e.jsx(me,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Z.pending})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-lg",children:e.jsx($e,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Accepted"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Z.accepted})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/20 rounded-lg",children:e.jsx(st,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Denied"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Z.denied})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search submissions...",value:N,onChange:i=>S(i.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("select",{value:P,onChange:i=>T(i.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"accepted",children:"Accepted"}),e.jsx("option",{value:"denied",children:"Denied"})]}),e.jsxs("select",{value:D,onChange:i=>O(i.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"date",children:"Sort by Date"}),e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"status",children:"Sort by Status"})]}),e.jsxs("button",{onClick:()=>I(z==="asc"?"desc":"asc"),className:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[z==="asc"?e.jsx(Jt,{className:"h-4 w-4 mr-2"}):e.jsx(Wt,{className:"h-4 w-4 mr-2"}),z==="asc"?"Ascending":"Descending"]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Application Submissions (",Fe.length,")"]})}),Fe.length>0?e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:Fe.map(i=>e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:Xe(i.avatar,i.discord_id),alt:i.username,className:"h-10 w-10 rounded-full"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[i.username,"#",i.discriminator]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["Submitted ",Ye(i.submitted_at)]}),i.reviewed_at&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:" "}),e.jsxs("span",{children:["Reviewed ",Ye(i.reviewed_at)]})]}),i.reviewed_by_name&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:" "}),e.jsxs("span",{children:["by ",i.reviewed_by_name]})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ct(i.status)}`,children:[Ke(i.status),e.jsx("span",{className:"ml-1",children:i.status.charAt(0).toUpperCase()+i.status.slice(1)})]}),e.jsx("button",{onClick:()=>De(i.id),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",children:H.has(i.id)?e.jsx(Jt,{className:"h-4 w-4"}):e.jsx(Wt,{className:"h-4 w-4"})}),i.status==="pending"&&e.jsx("button",{onClick:()=>Y(i),className:"px-3 py-1 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200 text-sm",children:"Review"})]})]}),H.has(i.id)&&e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"space-y-6",children:[ke.map((p,C)=>{const F=i.responses[p.id];return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:["Question ",C+1,": ",p.question]}),e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:Array.isArray(F)?e.jsx("ul",{className:"list-disc list-inside space-y-1",children:F.map((V,W)=>e.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:V},W))}):e.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:F||"No response provided"})})]},p.id)}),i.admin_notes&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white flex items-center",children:[e.jsx(ar,{className:"h-4 w-4 mr-2"}),"Admin Notes"]}),e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:i.admin_notes})})]})]})})]},i.id))}):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(be,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"No submissions found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:N||P?"Try adjusting your filters":"No applications have been submitted yet"})]})]})]}),a==="edit"&&e.jsxs("form",{onSubmit:Re,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Application Name"}),e.jsx("input",{type:"text",id:"name",value:d.name,onChange:i=>h(p=>({...p,name:i.target.value})),required:!0,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),e.jsx("select",{id:"category",value:d.category,onChange:i=>h(p=>({...p,category:i.target.value})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:Rn.map(i=>e.jsx("option",{value:i,children:i},i))})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{id:"description",value:d.description,onChange:i=>h(p=>({...p,description:i.target.value})),rows:3,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none"})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:d.is_active,onChange:i=>h(p=>({...p,is_active:i.target.checked})),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Application is active and accepting submissions"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Role Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"admin_role_id",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Admin Role ID"}),e.jsx("input",{type:"text",id:"admin_role_id",value:d.admin_role_id,onChange:i=>h(p=>({...p,admin_role_id:i.target.value})),placeholder:"Discord role ID for admins",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"moderator_role_id",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Moderator Role ID"}),e.jsx("input",{type:"text",id:"moderator_role_id",value:d.moderator_role_id,onChange:i=>h(p=>({...p,moderator_role_id:i.target.value})),placeholder:"Discord role ID for moderators",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Roles to Assign When Accepted"}),d.accepted_roles.map((i,p)=>e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("input",{type:"text",value:i,onChange:C=>dt(p,C.target.value),placeholder:"Discord role ID",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),d.accepted_roles.length>1&&e.jsx("button",{type:"button",onClick:()=>Ge(p),className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-lg transition-colors duration-200",children:e.jsx(we,{className:"h-4 w-4"})})]},p)),e.jsxs("button",{type:"button",onClick:lt,className:"inline-flex items-center px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200",children:[e.jsx(he,{className:"h-4 w-4 mr-1"}),"Add Role"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Discord Webhook Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"webhook_url",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Webhook URL"}),e.jsx("input",{type:"url",id:"webhook_url",value:d.webhook_url,onChange:i=>h(p=>({...p,webhook_url:i.target.value})),placeholder:"https://discord.com/api/webhooks/...",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"webhook_role_id",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role ID to Ping"}),e.jsx("input",{type:"text",id:"webhook_role_id",value:d.webhook_role_id,onChange:i=>h(p=>({...p,webhook_role_id:i.target.value})),placeholder:"Discord role ID",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Application Questions"}),e.jsxs("button",{type:"button",onClick:je,className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Add Question"]})]}),e.jsx("div",{className:"space-y-6",children:d.questions.map((i,p)=>e.jsxs("div",{className:"p-6 border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:["Question ",p+1]}),d.questions.length>1&&e.jsx("button",{type:"button",onClick:()=>ve(i.id),className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-lg transition-colors duration-200",children:e.jsx(we,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Question Type"}),e.jsxs("select",{value:i.type,onChange:C=>X(i.id,"type",C.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"text",children:"Short Text"}),e.jsx("option",{value:"textarea",children:"Long Text"}),e.jsx("option",{value:"select",children:"Dropdown"}),e.jsx("option",{value:"radio",children:"Multiple Choice"}),e.jsx("option",{value:"checkbox",children:"Checkboxes"})]})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:i.required,onChange:C=>X(i.id,"required",C.target.checked),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Required"})]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Question Text"}),e.jsx("input",{type:"text",value:i.question,onChange:C=>X(i.id,"question",C.target.value),placeholder:"Enter your question...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(i.type==="select"||i.type==="radio"||i.type==="checkbox")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Options"}),(i.options||[]).map((C,F)=>e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("input",{type:"text",value:C,onChange:V=>ot(i.id,F,V.target.value),placeholder:`Option ${F+1}`,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("button",{type:"button",onClick:()=>Ie(i.id,F),className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-lg transition-colors duration-200",children:e.jsx(we,{className:"h-4 w-4"})})]},F)),e.jsxs("button",{type:"button",onClick:()=>Ee(i.id),className:"inline-flex items-center px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200",children:[e.jsx(he,{className:"h-4 w-4 mr-1"}),"Add Option"]})]})]},i.id))})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>r("/applications"),className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:_,className:"inline-flex items-center px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:_?e.jsxs(e.Fragment,{children:[e.jsx(J,{}),e.jsx("span",{className:"ml-2",children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(at,{className:"h-5 w-5 mr-2"}),"Save Changes"]})})]})]}),Q&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:Xe(Q.avatar,Q.discord_id),alt:Q.username,className:"h-12 w-12 rounded-full"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Review Application"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[Q.username,"#",Q.discriminator]})]})]}),e.jsx("button",{onClick:()=>Y(null),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",children:e.jsx(Rt,{className:"h-6 w-6"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Application Responses"}),ke.map((i,p)=>{const C=Q.responses[i.id];return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:["Question ",p+1,": ",i.question]}),e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:Array.isArray(C)?e.jsx("ul",{className:"list-disc list-inside space-y-1",children:C.map((F,V)=>e.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:F},V))}):e.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:C||"No response provided"})})]},i.id)})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Review Decision"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>te("accepted"),className:`p-4 rounded-lg border-2 transition-all duration-200 ${re==="accepted"?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-300 dark:border-gray-600 hover:border-green-300"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx($e,{className:"h-6 w-6 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Accept"})]})}),e.jsx("button",{onClick:()=>te("denied"),className:`p-4 rounded-lg border-2 transition-all duration-200 ${re==="denied"?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-300 dark:border-gray-600 hover:border-red-300"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(st,{className:"h-6 w-6 text-red-600 dark:text-red-400"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Deny"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Review Notes (Optional)"}),e.jsx("textarea",{value:ie,onChange:i=>Ne(i.target.value),placeholder:"Add any notes about your decision...",rows:4,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none"})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>Y(null),className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:le,disabled:$||!re,className:"inline-flex items-center px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:$?e.jsxs(e.Fragment,{children:[e.jsx(J,{}),e.jsx("span",{className:"ml-2",children:"Submitting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(wt,{className:"h-5 w-5 mr-2"}),"Submit Review"]})})]})]})]})})]})},Dn=()=>{const t=Le();return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center border border-gray-200 dark:border-gray-700 transform transition-all duration-300 hover:scale-[1.02]",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("div",{className:"p-4 bg-yellow-100 dark:bg-yellow-900/20 rounded-full",children:e.jsx(me,{className:"h-12 w-12 text-yellow-500 dark:text-yellow-400"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Application Pending Review"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-8 leading-relaxed",children:"You already have a pending application for this form. Our team will review your submission and get back to you soon. Please check back later for updates."}),e.jsx("button",{onClick:()=>t("/applications"),className:"w-full inline-flex items-center justify-center px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:"Return to Applications"})]})})},Tn=()=>{const{user:t}=fe(),[r,s]=tr(),[a,n]=c.useState(null),[o,l]=c.useState([]),[x,b]=c.useState([]),[g,m]=c.useState(null),[f,_]=c.useState(!0),[E,w]=c.useState(!1),[A,j]=c.useState(!1),[k,d]=c.useState(!1),[h,N]=c.useState(null),[S,P]=c.useState(null),[T,H]=c.useState(null),[R,D]=c.useState({enableDepartments:!0,enableOrganizations:!0,enablePlayerRecord:!0,enableTimeclock:!0});c.useEffect(()=>{(async()=>{const L=await cr();D(L)})()},[]);const O=()=>{const y=r.get("tab");return y==="applications"?"applications":y==="timeclock"&&R.enableTimeclock?"timeclock":y==="roles"?"roles":y==="record"&&R.enablePlayerRecord?"record":"applications"},[z,I]=c.useState(O());c.useEffect(()=>{I(O())},[R]);const[Q,Y]=c.useState("warnings"),[re,te]=c.useState(""),[ie,Ne]=c.useState(""),[$,q]=c.useState(""),[Z,se]=c.useState(""),[v,M]=c.useState(10),[G,Re]=c.useState(10),[le,je]=c.useState(1),[X,ve]=c.useState(1);c.useEffect(()=>{(async()=>{if(t!=null&&t.discord_id)try{const L=await xn.getProfile(t.discord_id);n(L),N(null)}catch(L){console.error("Failed to fetch profile data:",L),N("not_found"),n({trustScore:0,kicks:[],warnings:[],bans:[],commends:[]})}finally{_(!1)}})()},[t]),c.useEffect(()=>{(async()=>{if(z==="applications"){w(!0);try{const L=await Se.getMyApplications();l(L)}catch(L){console.error("Failed to fetch applications:",L)}finally{w(!1)}}})()},[z]),c.useEffect(()=>{(async()=>{if(z==="timeclock"){d(!0),P(null);try{const L=await gn.getTimeclockData();m(L)}catch(L){console.error("Failed to fetch timeclock data:",L),P("Failed to load timeclock data")}finally{d(!1)}}})()},[z]),c.useEffect(()=>{(async()=>{if(z==="roles"){j(!0);try{const L=await tt.getSelfAssignable();b(L)}catch(L){console.error("Failed to fetch self-assignable roles:",L)}finally{j(!1)}}})()},[z]);const Ee=y=>{I(y),s(y==="applications"?{tab:"applications"}:y==="timeclock"?{tab:"timeclock"}:y==="roles"?{tab:"roles"}:{})},ot=async(y,L)=>{const ee=L?"remove":"add";H(y.toString());try{await tt.toggleRole(y.toString(),ee),b(It=>It.map(Mt=>Mt.id===y?{...Mt,hasRole:!L}:Mt))}catch(It){console.error("Failed to toggle role:",It),alert("Failed to update role. Please try again.")}finally{H(null)}},Ie=y=>new Date(y).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),lt=(y,L)=>y?`https://cdn.discordapp.com/avatars/${L}/${y}.png`:`https://cdn.discordapp.com/embed/avatars/${parseInt(L)%5}.png`,dt=y=>y>=80?"text-green-600 bg-green-100 dark:text-green-400 dark:bg-green-900/20":y>=60?"text-yellow-600 bg-yellow-100 dark:text-yellow-400 dark:bg-yellow-900/20":y>=40?"text-orange-600 bg-orange-100 dark:text-orange-400 dark:bg-orange-900/20":"text-red-600 bg-red-100 dark:text-red-400 dark:bg-red-900/20",Ge=y=>{switch(y){case"warnings":return e.jsx(Ve,{className:"h-4 w-4"});case"kicks":return e.jsx(rr,{className:"h-4 w-4"});case"bans":return e.jsx(yt,{className:"h-4 w-4"});case"commends":return e.jsx(Tr,{className:"h-4 w-4"})}},Ke=y=>{switch(y){case"warnings":return"text-yellow-600 dark:text-yellow-400";case"kicks":return"text-red-600 dark:text-red-400";case"bans":return"text-red-700 dark:text-red-500";case"commends":return"text-green-600 dark:text-green-400"}},ct=y=>{switch(y){case"accepted":return e.jsx($e,{className:"h-4 w-4 text-green-600 dark:text-green-400"});case"denied":return e.jsx(st,{className:"h-4 w-4 text-red-600 dark:text-red-400"});default:return e.jsx(me,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"})}},Ye=y=>{switch(y){case"accepted":return"text-green-600 bg-green-100 dark:text-green-400 dark:bg-green-900/20";case"denied":return"text-red-600 bg-red-100 dark:text-red-400 dark:bg-red-900/20";default:return"text-yellow-600 bg-yellow-100 dark:text-yellow-400 dark:bg-yellow-900/20"}},Xe=()=>a?a[Q]||[]:[],Ze=()=>{const y=Xe();return re?y.filter(L=>L.reason.toLowerCase().includes(re.toLowerCase())):y},Fe=()=>ie?o.filter(y=>y.app_name.toLowerCase().includes(ie.toLowerCase())||y.status.toLowerCase().includes(ie.toLowerCase())):o,De=()=>$?x.filter(y=>y.name.toLowerCase().includes($.toLowerCase())||y.description&&y.description.toLowerCase().includes($.toLowerCase())):x,ye=()=>!g||!Z?(g==null?void 0:g.departments)||[]:g.departments.filter(y=>y.department.toLowerCase().includes(Z.toLowerCase())),ke=()=>{const y=Ze(),L=(le-1)*v,ee=L+v;return y.slice(L,ee)},i=()=>{const y=Fe(),L=(X-1)*G,ee=L+G;return y.slice(L,ee)},p=()=>{const y=Ze();return Math.ceil(y.length/v)},C=()=>{const y=Fe();return Math.ceil(y.length/G)},F=y=>{var L;return a&&((L=a[y])==null?void 0:L.length)||0},V=y=>y.emoji?e.jsx("span",{className:"text-lg",children:y.emoji}):y.icon_url?e.jsx("img",{src:y.icon_url,alt:y.name,className:"w-5 h-5 object-contain"}):e.jsx(_t,{className:"h-5 w-5 text-indigo-500"});if(c.useEffect(()=>{je(1)},[Q,re,v]),c.useEffect(()=>{ve(1)},[ie,G]),f)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(J,{})});const W=Ze(),K=ke(),ce=p(),et=Fe(),Me=i(),Pe=C(),_e=De(),xr=ye();return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"My Profile"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Your staff record, application history, timeclock data, and role management"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-8",children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:lt((t==null?void 0:t.avatar)||"",(t==null?void 0:t.discord_id)||""),alt:t==null?void 0:t.username,className:"h-20 w-20 rounded-full ring-4 ring-indigo-500/20"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[t==null?void 0:t.username,"#",t==null?void 0:t.discriminator]}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:["Discord ID: ",t==null?void 0:t.discord_id]})]}),a&&!h&&e.jsx("div",{className:`px-6 py-4 rounded-xl ${dt(a.trustScore)}`,children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx(Ns,{className:"h-6 w-6 mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Trust Score"})]}),e.jsxs("span",{className:"text-3xl font-bold",children:[a.trustScore,"%"]})]})})]})}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[R.enablePlayerRecord&&e.jsx("button",{onClick:()=>Ee("record"),className:`${z==="record"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200`,children:"🧾 Player Record"}),e.jsx("button",{onClick:()=>Ee("applications"),className:`${z==="applications"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200`,children:"📋 Application Submissions"}),e.jsx("button",{onClick:()=>Ee("roles"),className:`${z==="roles"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200`,children:"👑 Roles"}),R.enableTimeclock&&e.jsx("button",{onClick:()=>Ee("timeclock"),className:`${z==="timeclock"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200`,children:"⏰ Timeclock"})]})}),z==="record"&&R.enablePlayerRecord&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Browse Player Record"}),!h&&e.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:["warnings","kicks","bans","commends"].map(y=>e.jsxs("button",{onClick:()=>Y(y),className:`flex items-center space-x-2 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${Q===y?"bg-white dark:bg-gray-800 shadow-sm text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[e.jsx("span",{className:Q===y?Ke(y):"",children:Ge(y)}),e.jsx("span",{className:"capitalize",children:y}),e.jsx("span",{className:"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-2 py-0.5 rounded-full text-xs",children:F(y)})]},y))})]})}),h==="not_found"?e.jsx("div",{className:"p-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"p-4 bg-blue-100 dark:bg-blue-900/20 rounded-full",children:e.jsx(vs,{className:"h-12 w-12 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No profile data available"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 max-w-md",children:"It looks like you haven't joined the server yet. Your player record will appear here once you join and interact with the server."})]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search reasons...",value:re,onChange:y=>te(y.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm w-64"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Show:"}),e.jsxs("select",{value:v,onChange:y=>M(Number(y.target.value)),className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 py-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"})]}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"per page"})]})})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Occurred At"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Reason"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:K.length>0?K.map((y,L)=>e.jsxs("tr",{className:`hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200 ${L%2===0?"bg-white dark:bg-gray-800":"bg-gray-50/50 dark:bg-gray-700/25"}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Nt,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:Ie(y.stamp)})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-white",children:e.jsx("div",{className:"max-w-md",children:y.reason})})]},y.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[e.jsx("div",{className:`p-3 rounded-full bg-gray-100 dark:bg-gray-700 ${Ke(Q)}`,children:Ge(Q)}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:["No ",Q," found"]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:re?"Try adjusting your search terms":`No ${Q} on record`})]})]})})})})]})}),K.length>0&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",(le-1)*v+1," to ",Math.min(le*v,W.length)," of ",W.length," results"]}),ce>1&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>je(Math.max(1,le-1)),disabled:le===1,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,ce)},(y,L)=>{let ee;return ce<=5||le<=3?ee=L+1:le>=ce-2?ee=ce-4+L:ee=le-2+L,e.jsx("button",{onClick:()=>je(ee),className:`px-3 py-1 rounded-md text-sm ${le===ee?"bg-indigo-600 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:ee},ee)})}),e.jsx("button",{onClick:()=>je(Math.min(ce,le+1)),disabled:le===ce,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})]})]}),z==="applications"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Application Submissions"})})}),e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search applications...",value:ie,onChange:y=>Ne(y.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm w-64"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Show:"}),e.jsxs("select",{value:G,onChange:y=>Re(Number(y.target.value)),className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 py-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"})]}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"per page"})]})})]})}),E?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(J,{})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Application Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Submission Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:Me.length>0?Me.map((y,L)=>e.jsxs("tr",{className:`hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200 cursor-pointer ${L%2===0?"bg-white dark:bg-gray-800":"bg-gray-50/50 dark:bg-gray-700/25"}`,onClick:()=>window.open(`/applications/${y.form_id}`,"_blank"),children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/20 rounded-lg",children:e.jsx(be,{className:"h-4 w-4 text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:y.app_name}),y.app_description&&e.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-xs mt-1",children:y.app_description})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Nt,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:Ie(y.submitted_at)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Ye(y.status)}`,children:[ct(y.status),e.jsx("span",{className:"ml-1",children:y.status.charAt(0).toUpperCase()+y.status.slice(1)})]}),y.admin_notes&&(y.status==="accepted"||y.status==="denied")&&e.jsxs("div",{className:"mt-2 p-2 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[e.jsx(ar,{className:"h-3 w-3 text-gray-500 dark:text-gray-400"}),e.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Review Notes:"})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:y.admin_notes})]})]})})]},y.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[e.jsx("div",{className:"p-3 rounded-full bg-gray-100 dark:bg-gray-700",children:e.jsx(be,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"No applications found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:ie?"Try adjusting your search terms":"You haven't submitted any applications yet"})]})]})})})})]})}),Me.length>0&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",(X-1)*G+1," to ",Math.min(X*G,et.length)," of ",et.length," results"]}),Pe>1&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>ve(Math.max(1,X-1)),disabled:X===1,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,Pe)},(y,L)=>{let ee;return Pe<=5||X<=3?ee=L+1:X>=Pe-2?ee=Pe-4+L:ee=X-2+L,e.jsx("button",{onClick:()=>ve(ee),className:`px-3 py-1 rounded-md text-sm ${X===ee?"bg-indigo-600 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:ee},ee)})}),e.jsx("button",{onClick:()=>ve(Math.min(Pe,X+1)),disabled:X===Pe,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})]})]}),z==="timeclock"&&R.enableTimeclock&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Department Hours"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Your accumulated time across all departments"})]})})}),e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(Oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search departments...",value:Z,onChange:y=>se(y.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm w-full"})]})}),k?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(J,{})}):S?e.jsx("div",{className:"p-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"p-4 bg-red-100 dark:bg-red-900/20 rounded-full",children:e.jsx(me,{className:"h-12 w-12 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Unable to load timeclock data"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 max-w-md",children:S})]})]})}):e.jsx("div",{className:"p-6",children:xr.length>0?e.jsxs("div",{className:"space-y-4",children:[xr.map((y,L)=>e.jsx("div",{className:"p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:border-indigo-300 dark:hover:border-indigo-600 transition-all duration-200 hover:shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/20 rounded-lg",children:e.jsx(me,{className:"h-5 w-5 text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:y.department}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total accumulated time"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:y.formattedTime}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[y.totalMinutes.toLocaleString()," minutes"]})]})]})},L)),g&&g.departments.length>0&&e.jsx("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_s,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Summary"})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[g.departments.length," department",g.departments.length!==1?"s":""," • ",g.totalEntries," total entries"]})]})})]}):e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[e.jsx("div",{className:"p-3 rounded-full bg-gray-100 dark:bg-gray-700",children:e.jsx(me,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"No timeclock data found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:Z?"Try adjusting your search terms":"No department hours have been recorded yet"})]})]})})})]}),z==="roles"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Self-Assignable Roles"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Manage your Discord roles directly from the hub"})]})})}),e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(Oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search roles...",value:$,onChange:y=>q(y.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm w-full"})]})}),A?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(J,{})}):e.jsx("div",{className:"p-6",children:_e.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_e.map(y=>e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:border-indigo-300 dark:hover:border-indigo-600 transition-all duration-200 hover:shadow-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:V(y)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:y.name}),y.description&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:y.description})]})]}),e.jsx("div",{className:"flex-shrink-0",children:y.hasRole?e.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-green-100 dark:bg-green-900/20 rounded-full",children:[e.jsx($e,{className:"h-3 w-3 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-xs font-medium text-green-600 dark:text-green-400",children:"Active"})]}):e.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-full",children:[e.jsx(st,{className:"h-3 w-3 text-gray-500 dark:text-gray-400"}),e.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Inactive"})]})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-400",children:[y.can_add&&e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(he,{className:"h-3 w-3"}),e.jsx("span",{children:"Add"})]}),y.can_remove&&e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(we,{className:"h-3 w-3"}),e.jsx("span",{children:"Remove"})]})]}),e.jsx("button",{onClick:()=>ot(y.id,y.hasRole),disabled:T===y.id.toString()||y.hasRole&&!y.can_remove||!y.hasRole&&!y.can_add,className:`inline-flex items-center px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 ${y.hasRole?"bg-red-600 text-white hover:bg-red-700 disabled:bg-red-400":"bg-indigo-600 text-white hover:bg-indigo-700 disabled:bg-indigo-400"} disabled:cursor-not-allowed`,children:T===y.id.toString()?e.jsx(J,{}):e.jsx(e.Fragment,{children:y.hasRole?e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"h-3 w-3 mr-1"}),"Remove"]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"h-3 w-3 mr-1"}),"Add"]})})})]})]},y.id))}):e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[e.jsx("div",{className:"p-3 rounded-full bg-gray-100 dark:bg-gray-700",children:e.jsx(_t,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"No roles available"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:$?"Try adjusting your search terms":"No self-assignable roles have been configured yet"})]})]})})})]})]})};var Fn={};const Pn=()=>{const{user:t}=fe(),[r,s]=c.useState([]),[a,n]=c.useState({page:1,limit:20,total:0,pages:0}),[o,l]=c.useState(!0),[x,b]=c.useState(""),[g,m]=c.useState(null),[f,_]=c.useState(!1),[E,w]=c.useState(""),[A,j]=c.useState(!1),k=()=>t?t.is_admin?!0:(t.roles||[]).some(D=>D.id===Fn.MANAGEMENT_ROLE_ID):!1,d=async(R=1,D="")=>{try{l(!0);const O=new URLSearchParams({page:R.toString(),limit:a.limit.toString()});D&&O.append("search",D);const z=await fetch(`/api/management/users?${O}`,{credentials:"include"});if(z.ok){const I=await z.json();s(I.users),n(I.pagination)}else console.error("Failed to fetch users")}catch(O){console.error("Error fetching users:",O)}finally{l(!1)}};c.useEffect(()=>{k()?d():l(!1)},[t]);const h=R=>{R.preventDefault(),d(1,x)},N=R=>{d(R,x)},S=async()=>{if(!(!g||!E.trim())){j(!0);try{const R=await fetch(`/api/management/users/${g.id}/ban`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({reason:E.trim()})});if(R.ok)_(!1),w(""),m(null),d(a.page,x);else{const D=await R.json();alert(D.error||"Failed to ban user")}}catch(R){console.error("Error banning user:",R),alert("Failed to ban user")}finally{j(!1)}}},P=async R=>{if(confirm("Are you sure you want to unban this user?"))try{const D=await fetch(`/api/management/users/${R}/unban`,{method:"POST",credentials:"include"});if(D.ok)d(a.page,x);else{const O=await D.json();alert(O.error||"Failed to unban user")}}catch(D){console.error("Error unbanning user:",D),alert("Failed to unban user")}},T=(R,D)=>R?`https://cdn.discordapp.com/avatars/${D}/${R}.png`:`https://cdn.discordapp.com/embed/avatars/${parseInt(D)%5}.png`,H=R=>new Date(R).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return k()?o?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(J,{})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Management Panel"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage hub users and permissions"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("form",{onSubmit:h,className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by username or Discord ID...",value:x,onChange:R=>b(R.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsx("button",{type:"submit",className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Search"})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Hub Users (",a.total,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Discord ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.map(R=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:T(R.avatar,R.discord_id),alt:R.username,className:"h-10 w-10 rounded-full"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[R.username,"#",R.discriminator]}),R.is_admin&&e.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[e.jsx(Ve,{className:"h-3 w-3 text-red-500"}),e.jsx("span",{className:"text-xs text-red-500 font-medium",children:"Admin"})]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:R.discord_id}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.is_hub_banned?e.jsxs("div",{className:"space-y-1",children:[e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",children:[e.jsx(yt,{className:"h-3 w-3 mr-1"}),"Hub Banned"]}),R.hub_ban_reason&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Reason: ",R.hub_ban_reason]}),R.hub_banned_at&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Banned: ",H(R.hub_banned_at)]}),R.banned_by_name&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["By: ",R.banned_by_name]})]}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",children:[e.jsx(We,{className:"h-3 w-3 mr-1"}),"Active"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("div",{className:"flex items-center space-x-2",children:R.is_hub_banned?e.jsxs("button",{onClick:()=>P(R.id),className:"inline-flex items-center px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200 text-xs",children:[e.jsx(We,{className:"h-3 w-3 mr-1"}),"Unban"]}):!R.is_admin&&R.id!==(t==null?void 0:t.id)&&e.jsxs("button",{onClick:()=>{m(R),_(!0)},className:"inline-flex items-center px-3 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200 text-xs",children:[e.jsx(yt,{className:"h-3 w-3 mr-1"}),"Ban"]})})})]},R.id))})]})}),a.pages>1&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",(a.page-1)*a.limit+1," to ",Math.min(a.page*a.limit,a.total)," of ",a.total," users"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>N(a.page-1),disabled:a.page===1,className:"p-2 border border-gray-300 dark:border-gray-600 rounded-md text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Ss,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,a.pages)},(R,D)=>{let O;return a.pages<=5||a.page<=3?O=D+1:a.page>=a.pages-2?O=a.pages-4+D:O=a.page-2+D,e.jsx("button",{onClick:()=>N(O),className:`px-3 py-1 rounded-md text-sm ${a.page===O?"bg-indigo-600 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:O},O)})}),e.jsx("button",{onClick:()=>N(a.page+1),disabled:a.page===a.pages,className:"p-2 border border-gray-300 dark:border-gray-600 rounded-md text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Cs,{className:"h-4 w-4"})})]})]})})]}),f&&g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/20 rounded-lg",children:e.jsx(rr,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Ban User"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[g.username,"#",g.discriminator]})]})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ban Reason"}),e.jsx("textarea",{value:E,onChange:R=>w(R.target.value),placeholder:"Enter the reason for banning this user...",rows:3,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx("button",{onClick:()=>{_(!1),w(""),m(null)},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:S,disabled:A||!E.trim(),className:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:A?e.jsx(J,{}):e.jsxs(e.Fragment,{children:[e.jsx(yt,{className:"h-4 w-4 mr-2"}),"Ban User"]})})]})]})]})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ve,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Access Denied"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"You need management privileges to access this page."})]})},On=()=>{const[t,r]=c.useState([]),[s,a]=c.useState(!0);return c.useEffect(()=>{(async()=>{try{const o=await ge.getByClassification("department");r(o)}catch(o){console.error("Failed to fetch departments:",o)}finally{a(!1)}})()},[]),s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(J,{})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Departments"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"View and manage department rosters and timeclock data"})]}),t.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(n=>e.jsxs(ne,{to:`/departments/${n.id}/roster`,className:"group bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600 transition-all duration-200 hover:shadow-xl card-hover",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-lg group-hover:bg-blue-200 dark:group-hover:bg-blue-900/30 transition-colors",children:e.jsx(ze,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsx(Ue,{className:"h-5 w-5 text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors"})]}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:n.name}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:"Callsign Prefix:"}),e.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs font-mono",children:n.callsign_prefix})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"h-4 w-4"}),e.jsxs("span",{children:[n.roster_count||0," members"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(me,{className:"h-4 w-4"}),e.jsxs("span",{children:["Created ",new Date(n.created_at).toLocaleDateString()]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Click to view roster and timeclock data"})})]},n.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ze,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"No departments available"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"You don't have access to any departments, or none have been created yet."})]})]})},Ln=()=>{const[t,r]=c.useState([]),[s,a]=c.useState(!0);return c.useEffect(()=>{(async()=>{try{const o=await ge.getByClassification("organization");r(o)}catch(o){console.error("Failed to fetch organizations:",o)}finally{a(!1)}})()},[]),s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(J,{})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Organizations"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"View and manage organization rosters and timeclock data"})]}),t.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(n=>e.jsxs(ne,{to:`/departments/${n.id}/roster`,className:"group bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 hover:border-purple-300 dark:hover:border-purple-600 transition-all duration-200 hover:shadow-xl card-hover",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/20 rounded-lg group-hover:bg-purple-200 dark:group-hover:bg-purple-900/30 transition-colors",children:e.jsx(gt,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsx(Ue,{className:"h-5 w-5 text-gray-400 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors"})]}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors",children:n.name}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:"Callsign Prefix:"}),e.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs font-mono",children:n.callsign_prefix})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"h-4 w-4"}),e.jsxs("span",{children:[n.roster_count||0," members"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(me,{className:"h-4 w-4"}),e.jsxs("span",{children:["Created ",new Date(n.created_at).toLocaleDateString()]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Click to view roster and timeclock data"})})]},n.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(gt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"No organizations available"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"You don't have access to any organizations, or none have been created yet."})]})]})},Un=()=>{const{id:t}=At(),r=Le(),[s,a]=c.useState(null),[n,o]=c.useState([]),[l,x]=c.useState(!0),[b,g]=c.useState(!1),[m,f]=c.useState(!1),[_,E]=c.useState(null),[w,A]=c.useState(!1),[j,k]=c.useState({discord_id:"",callsign_number:""});c.useEffect(()=>{(async()=>{if(t)try{const O=await ge.getRoster(t);a(O.department),o(O.roster)}catch(O){console.error("Failed to fetch roster:",O),r("/departments")}finally{x(!1)}})()},[t,r]);const d=async D=>{var O,z;if(D.preventDefault(),!(!t||!j.discord_id.trim())){if(!(s!=null&&s.disable_callsigns)&&!j.callsign_number.trim()){alert("Callsign number is required for this department");return}A(!0);try{await ge.addToRoster(t,j.discord_id.trim(),s!=null&&s.disable_callsigns?"":j.callsign_number.trim());const I=await ge.getRoster(t);o(I.roster),g(!1),k({discord_id:"",callsign_number:""})}catch(I){console.error("Failed to add user:",I),alert(((z=(O=I.response)==null?void 0:O.data)==null?void 0:z.error)||"Failed to add user to roster")}finally{A(!1)}}},h=async D=>{var O,z;if(D.preventDefault(),!(!t||!_||!j.callsign_number.trim())){A(!0);try{await ge.updateRosterMember(t,_.id.toString(),j.callsign_number.trim());const I=await ge.getRoster(t);o(I.roster),f(!1),E(null),k({discord_id:"",callsign_number:""})}catch(I){console.error("Failed to update user:",I),alert(((z=(O=I.response)==null?void 0:O.data)==null?void 0:z.error)||"Failed to update roster member")}finally{A(!1)}}},N=async D=>{var O,z;if(!(!t||!confirm("Are you sure you want to remove this member from the roster?")))try{await ge.removeFromRoster(t,D.toString());const I=await ge.getRoster(t);o(I.roster)}catch(I){console.error("Failed to remove user:",I),alert(((z=(O=I.response)==null?void 0:O.data)==null?void 0:z.error)||"Failed to remove user from roster")}},S=D=>{E(D),k({discord_id:D.discord_id,callsign_number:D.callsign_number||""}),f(!0)},P=(D,O)=>D?`https://cdn.discordapp.com/avatars/${O}/${D}.png`:`https://cdn.discordapp.com/embed/avatars/${parseInt(O)%5}.png`,T=D=>new Date(D).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});if(l)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(J,{})});if(!s)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Department not found"}),e.jsx("button",{onClick:()=>r("/departments"),className:"mt-4 text-indigo-600 dark:text-indigo-400 hover:underline",children:"Return to departments"})]});const H=s.classification==="organization"?gt:ze,R=s.classification==="organization"?"/organizations":"/departments";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>r(R),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200",children:e.jsx(Je,{className:"h-6 w-6 text-gray-600 dark:text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(H,{className:"h-8 w-8 text-indigo-600 dark:text-indigo-400"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:s.name})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Roster management and weekly timeclock overview"})]}),e.jsxs("button",{onClick:()=>g(!0),className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[e.jsx(Er,{className:"h-5 w-5 mr-2"}),"Add Member"]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[!s.disable_callsigns&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Callsign Prefix"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white font-mono",children:s.callsign_prefix})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Members"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:n.length})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Classification"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white capitalize",children:s.classification})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Callsigns"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s.disable_callsigns?"Disabled":"Enabled"})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Roster (",n.length," members)"]})}),n.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Member"}),!s.disable_callsigns&&e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Callsign"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Discord ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Weekly Timeclock"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Added"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:n.map(D=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:P(D.avatar,D.discord_id),alt:D.username,className:"h-10 w-10 rounded-full"}),e.jsx("div",{children:e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[D.username,"#",D.discriminator]})})]})}),!s.disable_callsigns&&e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:D.full_callsign?e.jsx("span",{className:"px-3 py-1 bg-indigo-100 dark:bg-indigo-900/20 text-indigo-800 dark:text-indigo-400 text-sm font-medium rounded-full font-mono",children:D.full_callsign}):e.jsx("span",{className:"text-gray-400 text-sm",children:"No callsign"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white font-mono",children:D.discord_id}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(me,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:D.weekly_timeclock_formatted})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.jsxs("div",{children:[e.jsx("div",{children:T(D.added_at)}),e.jsxs("div",{className:"text-xs",children:["by ",D.added_by_name]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[!s.disable_callsigns&&e.jsx("button",{onClick:()=>S(D),className:"p-2 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-100 dark:hover:bg-indigo-900/20 rounded-lg transition-colors duration-200",title:"Edit callsign",children:e.jsx(pt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>N(D.id),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-lg transition-colors duration-200",title:"Remove from roster",children:e.jsx(we,{className:"h-4 w-4"})})]})})]},D.id))})]})}):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(He,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"No roster members"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Add your first member to get started"})]})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Add Member to ",s.name]})}),e.jsxs("form",{onSubmit:d,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Discord ID"}),e.jsx("input",{type:"text",value:j.discord_id,onChange:D=>k(O=>({...O,discord_id:D.target.value})),placeholder:"123456789012345678",required:!0,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),!s.disable_callsigns&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Callsign Number"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"px-3 py-3 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white font-mono",children:s.callsign_prefix}),e.jsx("input",{type:"text",value:j.callsign_number,onChange:D=>k(O=>({...O,callsign_number:D.target.value})),placeholder:"01",required:!s.disable_callsigns,className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:["Full callsign will be: ",s.callsign_prefix,j.callsign_number]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{g(!1),k({discord_id:"",callsign_number:""})},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:w||!j.discord_id.trim()||!s.disable_callsigns&&!j.callsign_number.trim(),className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:w?e.jsx(J,{}):e.jsxs(e.Fragment,{children:[e.jsx(at,{className:"h-4 w-4 mr-2"}),"Add Member"]})})]})]})]})}),m&&_&&!s.disable_callsigns&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Edit Member Callsign"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:[_.username,"#",_.discriminator]})]}),e.jsxs("form",{onSubmit:h,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Callsign Number"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"px-3 py-3 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white font-mono",children:s.callsign_prefix}),e.jsx("input",{type:"text",value:j.callsign_number,onChange:D=>k(O=>({...O,callsign_number:D.target.value})),placeholder:"01",required:!0,className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:["Full callsign will be: ",s.callsign_prefix,j.callsign_number]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{f(!1),E(null),k({discord_id:"",callsign_number:""})},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:w||!j.callsign_number.trim(),className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:w?e.jsx(J,{}):e.jsxs(e.Fragment,{children:[e.jsx(at,{className:"h-4 w-4 mr-2"}),"Update Callsign"]})})]})]})]})})]})},$n=({children:t})=>{const{user:r,loading:s}=fe();return s?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:e.jsx(J,{})}):r?e.jsx(e.Fragment,{children:t}):e.jsx(Ar,{to:"/login",replace:!0})},In=()=>(c.useEffect(()=>{document.documentElement.classList.add("dark")},[]),c.useEffect(()=>{(async()=>{try{const r=await fetch("/api/settings/branding");if(r.ok){const s=await r.json();document.title=s.community_name}}catch(r){console.error("Failed to fetch branding:",r)}})()},[]),e.jsx(mn,{children:e.jsx(xs,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs(gs,{children:[e.jsx(oe,{path:"/login",element:e.jsx(pn,{})}),e.jsxs(oe,{path:"/",element:e.jsx($n,{children:e.jsx(un,{})}),children:[e.jsx(oe,{index:!0,element:e.jsx(yn,{})}),e.jsx(oe,{path:"tickets",element:e.jsx(bn,{})}),e.jsx(oe,{path:"tickets/new",element:e.jsx(kn,{})}),e.jsx(oe,{path:"tickets/:id",element:e.jsx(fn,{})}),e.jsx(oe,{path:"support",element:e.jsx(Nn,{})}),e.jsx(oe,{path:"support/category/:categoryId",element:e.jsx(vn,{})}),e.jsx(oe,{path:"applications",element:e.jsx(Sn,{})}),e.jsx(oe,{path:"applications/new",element:e.jsx(An,{})}),e.jsx(oe,{path:"applications/:id",element:e.jsx(En,{})}),e.jsx(oe,{path:"applications/:id/pending",element:e.jsx(Dn,{})}),e.jsx(oe,{path:"my-profile",element:e.jsx(Tn,{})}),e.jsx(oe,{path:"management",element:e.jsx(Pn,{})}),e.jsx(oe,{path:"departments",element:e.jsx(On,{})}),e.jsx(oe,{path:"organizations",element:e.jsx(Ln,{})}),e.jsx(oe,{path:"departments/:id/roster",element:e.jsx(Un,{})}),e.jsx(oe,{path:"admin",element:e.jsx(wn,{})})]})]})})})}));Or(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsx(In,{})}));
